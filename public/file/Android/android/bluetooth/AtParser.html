<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_10) on Wed Feb 11 14:33:35 MSK 2009 -->
<TITLE>
AtParser
</TITLE>

<META NAME="date" CONTENT="2009-02-11">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="AtParser";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/AtParser.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
<b>Build&nbsp;1.1_r1 (from&nbsp;source)</b></EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../android/bluetooth/AtCommandResult.html" title="class in android.bluetooth"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../android/bluetooth/BluetoothA2dp.html" title="class in android.bluetooth"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?android/bluetooth/AtParser.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="AtParser.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
android.bluetooth</FONT>
<BR>
Class AtParser</H2>
<PRE>
<A HREF="../../java/lang/Object.html" title="class in java.lang">java.lang.Object</A>
  <IMG SRC="../../resources/inherit.gif" ALT="extended by "><B>android.bluetooth.AtParser</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>AtParser</B><DT>extends <A HREF="../../java/lang/Object.html" title="class in java.lang">Object</A></DL>
</PRE>

<P>
An AT (Hayes command) Parser based on (a subset of) the ITU-T V.250 standard.
 <p>

 Conforment with the subset of V.250 required for implementation of the
 Bluetooth Headset and Handsfree Profiles, as per Bluetooth SIP
 specifications. Also implements some V.250 features not required by
 Bluetooth - such as chained commands.<p>

 Command handlers are registered with an AtParser object. These handlers are
 invoked when command lines are processed by AtParser's process() method.<p>

 The AtParser object accepts a new command line to parse via its process()
 method. It breaks each command line into one or more commands. Each command
 is parsed for name, type, and (optional) arguments, and an appropriate
 external handler method is called through the AtCommandHandler interface.

 The command types are<ul>
 <li>Basic Command. For example "ATDT1234567890". Basic command names are a
 single character (e.g. "D"), and everything following this character is
 passed to the handler as a string argument (e.g. "T1234567890").
 <li>Action Command. For example "AT+CIMI". The command name is "CIMI", and
 there are no arguments for action commands.
 <li>Read Command. For example "AT+VGM?". The command name is "VGM", and there
 are no arguments for get commands.
 <li>Set Command. For example "AT+VGM=14". The command name is "VGM", and
 there is a single integer argument in this case. In the general case then
 can be zero or more arguments (comma deliminated) each of integer or string
 form.
 <li>Test Command. For example "AT+VGM=?. No arguments.
 </ul>

 In V.250 the last four command types are known as Extended Commands, and
 they are used heavily in Bluetooth.<p>

 Basic commands cannot be chained in this implementation. For Bluetooth
 headset/handsfree use this is acceptable, because they only use the basic
 commands ATA and ATD, which are not allowed to be chained. For general V.250
 use we would need to improve this class to allow Basic command chaining -
 however its tricky to get right becuase there is no deliminator for Basic
 command chaining.<p>

 Extended commands can be chained. For example:<p>
 AT+VGM?;+VGM=14;+CIMI<p>
 This is equivalent to:<p>
 AT+VGM?
 AT+VGM=14
 AT+CIMI
 Except that only one final result code is return (although several
 intermediate responses may be returned), and as soon as one command in the
 chain fails the rest are abandonded.<p>

 Handlers are registered by there command name via register(Char c, ...) or
 register(String s, ...). Handlers for Basic command should be registered by
 the basic command character, and handlers for Extended commands should be
 registered by String.<p>

 Refer to:<ul>
 <li>ITU-T Recommendation V.250
 <li>ETSI TS 127.007  (AT Comannd set for User Equipment, 3GPP TS 27.007)
 <li>Bluetooth Headset Profile Spec (K6)
 <li>Bluetooth Handsfree Profile Spec (HFP 1.5)
 </ul>
<P>

<P>
<HR>

<P>

<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../android/bluetooth/AtParser.html#AtParser()">AtParser</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create a new AtParser.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../android/bluetooth/AtCommandResult.html" title="class in android.bluetooth">AtCommandResult</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../android/bluetooth/AtParser.html#process(java.lang.String)">process</A></B>(<A HREF="../../java/lang/String.html" title="class in java.lang">String</A>&nbsp;raw_input)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Processes an incoming AT command line.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../android/bluetooth/AtParser.html#register(java.lang.Character, android.bluetooth.AtCommandHandler)">register</A></B>(<A HREF="../../java/lang/Character.html" title="class in java.lang">Character</A>&nbsp;command,
         <A HREF="../../android/bluetooth/AtCommandHandler.html" title="class in android.bluetooth">AtCommandHandler</A>&nbsp;handler)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Register a Basic command handler.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../android/bluetooth/AtParser.html#register(java.lang.String, android.bluetooth.AtCommandHandler)">register</A></B>(<A HREF="../../java/lang/String.html" title="class in java.lang">String</A>&nbsp;command,
         <A HREF="../../android/bluetooth/AtCommandHandler.html" title="class in android.bluetooth">AtCommandHandler</A>&nbsp;handler)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Register an Extended command handler.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.<A HREF="../../java/lang/Object.html" title="class in java.lang">Object</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../java/lang/Object.html#clone()">clone</A>, <A HREF="../../java/lang/Object.html#equals(java.lang.Object)">equals</A>, <A HREF="../../java/lang/Object.html#finalize()">finalize</A>, <A HREF="../../java/lang/Object.html#getClass()">getClass</A>, <A HREF="../../java/lang/Object.html#hashCode()">hashCode</A>, <A HREF="../../java/lang/Object.html#notify()">notify</A>, <A HREF="../../java/lang/Object.html#notifyAll()">notifyAll</A>, <A HREF="../../java/lang/Object.html#toString()">toString</A>, <A HREF="../../java/lang/Object.html#wait()">wait</A>, <A HREF="../../java/lang/Object.html#wait(long)">wait</A>, <A HREF="../../java/lang/Object.html#wait(long, int)">wait</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="AtParser()"><!-- --></A><H3>
AtParser</H3>
<PRE>
public <B>AtParser</B>()</PRE>
<DL>
<DD>Create a new AtParser.<p>
 No handlers are registered.
<P>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="register(java.lang.Character, android.bluetooth.AtCommandHandler)"><!-- --></A><H3>
register</H3>
<PRE>
public void <B>register</B>(<A HREF="../../java/lang/Character.html" title="class in java.lang">Character</A>&nbsp;command,
                     <A HREF="../../android/bluetooth/AtCommandHandler.html" title="class in android.bluetooth">AtCommandHandler</A>&nbsp;handler)</PRE>
<DL>
<DD>Register a Basic command handler.<p>
 Basic command handlers are later called via their
 <code>handleBasicCommand(String args)</code> method.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>command</CODE> - Command name - a single character<DD><CODE>handler</CODE> - Handler to register</DL>
</DD>
</DL>
<HR>

<A NAME="register(java.lang.String, android.bluetooth.AtCommandHandler)"><!-- --></A><H3>
register</H3>
<PRE>
public void <B>register</B>(<A HREF="../../java/lang/String.html" title="class in java.lang">String</A>&nbsp;command,
                     <A HREF="../../android/bluetooth/AtCommandHandler.html" title="class in android.bluetooth">AtCommandHandler</A>&nbsp;handler)</PRE>
<DL>
<DD>Register an Extended command handler.<p>
 Extended command handlers are later called via:<ul>
 <li><code>handleActionCommand()</code>
 <li><code>handleGetCommand()</code>
 <li><code>handleSetCommand()</code>
 <li><code>handleTestCommand()</code>
 </ul>
 Only one method will be called for each command processed.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>command</CODE> - Command name - can be multiple characters<DD><CODE>handler</CODE> - Handler to register</DL>
</DD>
</DL>
<HR>

<A NAME="process(java.lang.String)"><!-- --></A><H3>
process</H3>
<PRE>
public <A HREF="../../android/bluetooth/AtCommandResult.html" title="class in android.bluetooth">AtCommandResult</A> <B>process</B>(<A HREF="../../java/lang/String.html" title="class in java.lang">String</A>&nbsp;raw_input)</PRE>
<DL>
<DD>Processes an incoming AT command line.<p>
 This method will invoke zero or one command handler methods for each
 command in the command line.<p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>raw_input</CODE> - The AT input, without EOL deliminator (e.g. <CR>).
<DT><B>Returns:</B><DD>Result object for this command line. This can be
                  converted to a String[] response with toStrings().</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/AtParser.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
<b>Build&nbsp;1.1_r1 (from&nbsp;source)</b></EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../android/bluetooth/AtCommandResult.html" title="class in android.bluetooth"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../android/bluetooth/BluetoothA2dp.html" title="class in android.bluetooth"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?android/bluetooth/AtParser.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="AtParser.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
