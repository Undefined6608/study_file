<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_20) on Thu Oct 14 17:32:53 CST 2010 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
LockSupport (Test API)
</TITLE>

<META NAME="date" CONTENT="2010-10-14">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="LockSupport (Test API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="跳过导航链接"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>概述</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>软件包</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>类</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/LockSupport.html"><FONT CLASS="NavBarFont1"><B>使用</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>树</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>已过时</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>索引</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>帮助</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../java/util/concurrent/locks/Lock.html" title="java.util.concurrent.locks 中的接口"><B>上一个类</B></A>&nbsp;
&nbsp;<A HREF="../../../../java/util/concurrent/locks/ReadWriteLock.html" title="java.util.concurrent.locks 中的接口"><B>下一个类</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?java/util/concurrent/locks/LockSupport.html" target="_top"><B>框架</B></A>  &nbsp;
&nbsp;<A HREF="LockSupport.html" target="_top"><B>无框架</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>所有类</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>所有类</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  摘要：&nbsp;嵌套&nbsp;|&nbsp;字段&nbsp;|&nbsp;构造方法&nbsp;|&nbsp;<A HREF="#method_summary">方法</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
详细信息：&nbsp;字段&nbsp;|&nbsp;构造方法&nbsp;|&nbsp;<A HREF="#method_detail">方法</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
java.util.concurrent.locks</FONT>
<BR>
类 LockSupport</H2>
<PRE>
<A HREF="../../../../java/lang/Object.html" title="java.lang 中的类">java.lang.Object</A>
  <IMG SRC="../../../../resources/inherit.gif" ALT="继承者 "><B>java.util.concurrent.locks.LockSupport</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <A HREF="../../../../src-html/java/util/concurrent/locks/LockSupport.html#line.75"><B>LockSupport</B></A><DT>extends <A HREF="../../../../java/lang/Object.html" title="java.lang 中的类">Object</A></DL>
</PRE>

<P>
Basic thread blocking primitives for creating locks and other
 synchronization classes.

 <p>This class associates with each thread that uses it, a permit
 (in the sense of the <A HREF="../../../../java/util/concurrent/Semaphore.html" title="java.util.concurrent 中的类"><CODE>Semaphore</CODE></A> class). A call to <tt>park</tt> will return immediately
 if the permit is available, consuming it in the process; otherwise
 it <em>may</em> block.  A call to <tt>unpark</tt> makes the permit
 available, if it was not already available. (Unlike with Semaphores
 though, permits do not accumulate. There is at most one.)

 <p>Methods <tt>park</tt> and <tt>unpark</tt> provide efficient
 means of blocking and unblocking threads that do not encounter the
 problems that cause the deprecated methods <tt>Thread.suspend</tt>
 and <tt>Thread.resume</tt> to be unusable for such purposes: Races
 between one thread invoking <tt>park</tt> and another thread trying
 to <tt>unpark</tt> it will preserve liveness, due to the
 permit. Additionally, <tt>park</tt> will return if the caller's
 thread was interrupted, and timeout versions are supported. The
 <tt>park</tt> method may also return at any other time, for "no
 reason", so in general must be invoked within a loop that rechecks
 conditions upon return. In this sense <tt>park</tt> serves as an
 optimization of a "busy wait" that does not waste as much time
 spinning, but must be paired with an <tt>unpark</tt> to be
 effective.

 <p>These methods are designed to be used as tools for creating
 higher-level synchronization utilities, and are not in themselves
 useful for most concurrency control applications.

 <p><b>Sample Usage.</b> Here is a sketch of a First-in-first-out
 non-reentrant lock class.
 <pre>
   private AtomicBoolean locked = new AtomicBoolean(false);
   private Queue&lt;Thread&gt; waiters = new ConcurrentLinkedQueue&lt;Thread&gt;();

   public void lock() { 
     boolean wasInterrupted = false;
     Thread current = Thread.currentThread();
     waiters.add(current);

     // Block while not first in queue or cannot acquire lock
     while (waiters.peek() != current || 
            !locked.compareAndSet(false, true)) { 
        LockSupport.park();
        if (Thread.interrupted()) // ignore interrupts while waiting
          wasInterrupted = true;
     }

     waiters.remove();
     if (wasInterrupted)          // reassert interrupt status on exit
        current.interrupt();
   }

   public void unlock() {
     locked.set(false);
     LockSupport.unpark(waiters.peek());
   } 
 }
 </pre>
<P>

<P>
<HR>

<P>

<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>方法摘要</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../java/util/concurrent/locks/LockSupport.html#park()">park</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Disables the current thread for thread scheduling purposes unless the
 permit is available.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../java/util/concurrent/locks/LockSupport.html#parkNanos(long)">parkNanos</A></B>(long&nbsp;nanos)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Disables the current thread for thread scheduling purposes, for up to
 the specified waiting time, unless the permit is available.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../java/util/concurrent/locks/LockSupport.html#parkUntil(long)">parkUntil</A></B>(long&nbsp;deadline)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Disables the current thread for thread scheduling purposes, until
 the specified deadline, unless the permit is available.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../java/util/concurrent/locks/LockSupport.html#unpark(java.lang.Thread)">unpark</A></B>(<A HREF="../../../../java/lang/Thread.html" title="java.lang 中的类">Thread</A>&nbsp;thread)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Make available the permit for the given thread, if it
 was not already available.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>从类 java.lang.<A HREF="../../../../java/lang/Object.html" title="java.lang 中的类">Object</A> 继承的方法</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../java/lang/Object.html#equals(java.lang.Object)">equals</A>, <A HREF="../../../../java/lang/Object.html#getClass()">getClass</A>, <A HREF="../../../../java/lang/Object.html#hashCode()">hashCode</A>, <A HREF="../../../../java/lang/Object.html#notify()">notify</A>, <A HREF="../../../../java/lang/Object.html#notifyAll()">notifyAll</A>, <A HREF="../../../../java/lang/Object.html#toString()">toString</A>, <A HREF="../../../../java/lang/Object.html#wait()">wait</A>, <A HREF="../../../../java/lang/Object.html#wait(long)">wait</A>, <A HREF="../../../../java/lang/Object.html#wait(long, int)">wait</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>方法详细信息</B></FONT></TH>
</TR>
</TABLE>

<A NAME="unpark(java.lang.Thread)"><!-- --></A><H3>
unpark</H3>
<PRE>
public static void <A HREF="../../../../src-html/java/util/concurrent/locks/LockSupport.html#line.92"><B>unpark</B></A>(<A HREF="../../../../java/lang/Thread.html" title="java.lang 中的类">Thread</A>&nbsp;thread)</PRE>
<DL>
<DD>Make available the permit for the given thread, if it
 was not already available.  If the thread was blocked on
 <tt>park</tt> then it will unblock.  Otherwise, its next call
 to <tt>park</tt> is guaranteed not to block. This operation
 is not guaranteed to have any effect at all if the given
 thread has not been started.
<P>
<DD><DL>
<DT><B>参数：</B><DD><CODE>thread</CODE> - the thread to unpark, or <tt>null</tt>, in which case
 this operation has no effect.</DL>
</DD>
</DL>
<HR>

<A NAME="park()"><!-- --></A><H3>
park</H3>
<PRE>
public static void <A HREF="../../../../src-html/java/util/concurrent/locks/LockSupport.html#line.116"><B>park</B></A>()</PRE>
<DL>
<DD>Disables the current thread for thread scheduling purposes unless the
 permit is available.
 <p>If the permit is available then it is consumed and the call returns
 immediately; otherwise 
 the current thread becomes disabled for thread scheduling 
 purposes and lies dormant until one of three things happens:
 <ul>
 <li>Some other thread invokes <tt>unpark</tt> with the current thread 
 as the target; or
 <li>Some other thread <A HREF="../../../../java/lang/Thread.html#interrupt()"><CODE>interrupts</CODE></A> the current
 thread; or
 <li>The call spuriously (that is, for no reason) returns.
 </ul>
 <p>This method does <em>not</em> report which of these caused the 
 method to return. Callers should re-check the conditions which caused 
 the thread to park in the first place. Callers may also determine, 
 for example, the interrupt status of the thread upon return.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="parkNanos(long)"><!-- --></A><H3>
parkNanos</H3>
<PRE>
public static void <A HREF="../../../../src-html/java/util/concurrent/locks/LockSupport.html#line.143"><B>parkNanos</B></A>(long&nbsp;nanos)</PRE>
<DL>
<DD>Disables the current thread for thread scheduling purposes, for up to
 the specified waiting time, unless the permit is available.
 <p>If the permit is available then it is consumed and the call returns
 immediately; otherwise 
 the current thread becomes disabled for thread scheduling 
 purposes and lies dormant until one of four things happens:
 <ul>
 <li>Some other thread invokes <tt>unpark</tt> with the current thread 
 as the target; or
 <li>Some other thread <A HREF="../../../../java/lang/Thread.html#interrupt()"><CODE>interrupts</CODE></A> the current
 thread; or
 <li>The specified waiting time elapses; or
 <li>The call spuriously (that is, for no reason) returns.
 </ul>
 <p>This method does <em>not</em> report which of these caused the 
 method to return. Callers should re-check the conditions which caused 
 the thread to park in the first place. Callers may also determine, 
 for example, the interrupt status of the thread, or the elapsed time
 upon return.
<P>
<DD><DL>
<DT><B>参数：</B><DD><CODE>nanos</CODE> - the maximum number of nanoseconds to wait</DL>
</DD>
</DL>
<HR>

<A NAME="parkUntil(long)"><!-- --></A><H3>
parkUntil</H3>
<PRE>
public static void <A HREF="../../../../src-html/java/util/concurrent/locks/LockSupport.html#line.172"><B>parkUntil</B></A>(long&nbsp;deadline)</PRE>
<DL>
<DD>Disables the current thread for thread scheduling purposes, until
 the specified deadline, unless the permit is available.
 <p>If the permit is available then it is consumed and the call returns
 immediately; otherwise 
 the current thread becomes disabled for thread scheduling 
 purposes and lies dormant until one of four things happens:
 <ul>
 <li>Some other thread invokes <tt>unpark</tt> with the current thread 
 as the target; or
 <li>Some other thread <A HREF="../../../../java/lang/Thread.html#interrupt()"><CODE>interrupts</CODE></A> the current
 thread; or
 <li>The specified deadline passes; or
 <li>The call spuriously (that is, for no reason) returns.
 </ul>
 <p>This method does <em>not</em> report which of these caused the 
 method to return. Callers should re-check the conditions which caused 
 the thread to park in the first place. Callers may also determine, 
 for example, the interrupt status of the thread, or the current time
 upon return.
<P>
<DD><DL>
<DT><B>参数：</B><DD><CODE>deadline</CODE> - the absolute time, in milliseconds from the Epoch, to
 wait until</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="跳过导航链接"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>概述</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>软件包</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>类</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/LockSupport.html"><FONT CLASS="NavBarFont1"><B>使用</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>树</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>已过时</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>索引</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>帮助</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../java/util/concurrent/locks/Lock.html" title="java.util.concurrent.locks 中的接口"><B>上一个类</B></A>&nbsp;
&nbsp;<A HREF="../../../../java/util/concurrent/locks/ReadWriteLock.html" title="java.util.concurrent.locks 中的接口"><B>下一个类</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?java/util/concurrent/locks/LockSupport.html" target="_top"><B>框架</B></A>  &nbsp;
&nbsp;<A HREF="LockSupport.html" target="_top"><B>无框架</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>所有类</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>所有类</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  摘要：&nbsp;嵌套&nbsp;|&nbsp;字段&nbsp;|&nbsp;构造方法&nbsp;|&nbsp;<A HREF="#method_summary">方法</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
详细信息：&nbsp;字段&nbsp;|&nbsp;构造方法&nbsp;|&nbsp;<A HREF="#method_detail">方法</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
