<HTML>
<BODY BGCOLOR="white">
<PRE>
<FONT color="green">001</FONT>    /*<a name="line.1"></a>
<FONT color="green">002</FONT>     * Copyright (C) 2007 The Android Open Source Project<a name="line.2"></a>
<FONT color="green">003</FONT>     *<a name="line.3"></a>
<FONT color="green">004</FONT>     * Licensed under the Apache License, Version 2.0 (the "License");<a name="line.4"></a>
<FONT color="green">005</FONT>     * you may not use this file except in compliance with the License.<a name="line.5"></a>
<FONT color="green">006</FONT>     * You may obtain a copy of the License at<a name="line.6"></a>
<FONT color="green">007</FONT>     *<a name="line.7"></a>
<FONT color="green">008</FONT>     *      http://www.apache.org/licenses/LICENSE-2.0<a name="line.8"></a>
<FONT color="green">009</FONT>     *<a name="line.9"></a>
<FONT color="green">010</FONT>     * Unless required by applicable law or agreed to in writing, software<a name="line.10"></a>
<FONT color="green">011</FONT>     * distributed under the License is distributed on an "AS IS" BASIS,<a name="line.11"></a>
<FONT color="green">012</FONT>     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<a name="line.12"></a>
<FONT color="green">013</FONT>     * See the License for the specific language governing permissions and<a name="line.13"></a>
<FONT color="green">014</FONT>     * limitations under the License.<a name="line.14"></a>
<FONT color="green">015</FONT>     */<a name="line.15"></a>
<FONT color="green">016</FONT>    <a name="line.16"></a>
<FONT color="green">017</FONT>    package android.app;<a name="line.17"></a>
<FONT color="green">018</FONT>    <a name="line.18"></a>
<FONT color="green">019</FONT>    import android.content.ComponentName;<a name="line.19"></a>
<FONT color="green">020</FONT>    import android.content.Context;<a name="line.20"></a>
<FONT color="green">021</FONT>    import android.content.DialogInterface;<a name="line.21"></a>
<FONT color="green">022</FONT>    import android.content.res.Configuration;<a name="line.22"></a>
<FONT color="green">023</FONT>    import android.os.Bundle;<a name="line.23"></a>
<FONT color="green">024</FONT>    import android.os.Handler;<a name="line.24"></a>
<FONT color="green">025</FONT>    import android.os.ServiceManager;<a name="line.25"></a>
<FONT color="green">026</FONT>    import android.view.KeyEvent;<a name="line.26"></a>
<FONT color="green">027</FONT>    <a name="line.27"></a>
<FONT color="green">028</FONT>    /**<a name="line.28"></a>
<FONT color="green">029</FONT>     * This class provides access to the system search services.<a name="line.29"></a>
<FONT color="green">030</FONT>     * <a name="line.30"></a>
<FONT color="green">031</FONT>     * &lt;p&gt;In practice, you won't interact with this class directly, as search<a name="line.31"></a>
<FONT color="green">032</FONT>     * services are provided through methods in {@link android.app.Activity Activity}<a name="line.32"></a>
<FONT color="green">033</FONT>     * methods and the the {@link android.content.Intent#ACTION_SEARCH ACTION_SEARCH}<a name="line.33"></a>
<FONT color="green">034</FONT>     * {@link android.content.Intent Intent}.  This class does provide a basic<a name="line.34"></a>
<FONT color="green">035</FONT>     * overview of search services and how to integrate them with your activities.<a name="line.35"></a>
<FONT color="green">036</FONT>     * If you do require direct access to the Search Manager, do not instantiate <a name="line.36"></a>
<FONT color="green">037</FONT>     * this class directly; instead, retrieve it through<a name="line.37"></a>
<FONT color="green">038</FONT>     * {@link android.content.Context#getSystemService<a name="line.38"></a>
<FONT color="green">039</FONT>     * context.getSystemService(Context.SEARCH_SERVICE)}.<a name="line.39"></a>
<FONT color="green">040</FONT>     * <a name="line.40"></a>
<FONT color="green">041</FONT>     * &lt;p&gt;Topics covered here:<a name="line.41"></a>
<FONT color="green">042</FONT>     * &lt;ol&gt;<a name="line.42"></a>
<FONT color="green">043</FONT>     * &lt;li&gt;&lt;a href="#DeveloperGuide"&gt;Developer Guide&lt;/a&gt;<a name="line.43"></a>
<FONT color="green">044</FONT>     * &lt;li&gt;&lt;a href="#HowSearchIsInvoked"&gt;How Search Is Invoked&lt;/a&gt;<a name="line.44"></a>
<FONT color="green">045</FONT>     * &lt;li&gt;&lt;a href="#QuerySearchApplications"&gt;Query-Search Applications&lt;/a&gt;<a name="line.45"></a>
<FONT color="green">046</FONT>     * &lt;li&gt;&lt;a href="#FilterSearchApplications"&gt;Filter-Search Applications&lt;/a&gt;<a name="line.46"></a>
<FONT color="green">047</FONT>     * &lt;li&gt;&lt;a href="#Suggestions"&gt;Search Suggestions&lt;/a&gt;<a name="line.47"></a>
<FONT color="green">048</FONT>     * &lt;li&gt;&lt;a href="#ActionKeys"&gt;Action Keys&lt;/a&gt;<a name="line.48"></a>
<FONT color="green">049</FONT>     * &lt;li&gt;&lt;a href="#SearchabilityMetadata"&gt;Searchability Metadata&lt;/a&gt;<a name="line.49"></a>
<FONT color="green">050</FONT>     * &lt;li&gt;&lt;a href="#PassingSearchContext"&gt;Passing Search Context&lt;/a&gt;<a name="line.50"></a>
<FONT color="green">051</FONT>     * &lt;li&gt;&lt;a href="#ProtectingUserPrivacy"&gt;Protecting User Privacy&lt;/a&gt;<a name="line.51"></a>
<FONT color="green">052</FONT>     * &lt;/ol&gt;<a name="line.52"></a>
<FONT color="green">053</FONT>     * <a name="line.53"></a>
<FONT color="green">054</FONT>     * &lt;a name="DeveloperGuide"&gt;&lt;/a&gt;<a name="line.54"></a>
<FONT color="green">055</FONT>     * &lt;h3&gt;Developer Guide&lt;/h3&gt;<a name="line.55"></a>
<FONT color="green">056</FONT>     * <a name="line.56"></a>
<FONT color="green">057</FONT>     * &lt;p&gt;The ability to search for user, system, or network based data is considered to be<a name="line.57"></a>
<FONT color="green">058</FONT>     * a core user-level feature of the android platform.  At any time, the user should be<a name="line.58"></a>
<FONT color="green">059</FONT>     * able to use a familiar command, button, or keystroke to invoke search, and the user<a name="line.59"></a>
<FONT color="green">060</FONT>     * should be able to search any data which is available to them.  The goal is to make search <a name="line.60"></a>
<FONT color="green">061</FONT>     * appear to the user as a seamless, system-wide feature.<a name="line.61"></a>
<FONT color="green">062</FONT>     * <a name="line.62"></a>
<FONT color="green">063</FONT>     * &lt;p&gt;In terms of implementation, there are three broad classes of Applications:<a name="line.63"></a>
<FONT color="green">064</FONT>     * &lt;ol&gt;<a name="line.64"></a>
<FONT color="green">065</FONT>     * &lt;li&gt;Applications that are not inherently searchable&lt;/li&gt;<a name="line.65"></a>
<FONT color="green">066</FONT>     * &lt;li&gt;Query-Search Applications&lt;/li&gt;<a name="line.66"></a>
<FONT color="green">067</FONT>     * &lt;li&gt;Filter-Search Applications&lt;/li&gt;<a name="line.67"></a>
<FONT color="green">068</FONT>     * &lt;/ol&gt;<a name="line.68"></a>
<FONT color="green">069</FONT>     * &lt;p&gt;These categories, as well as related topics, are discussed in<a name="line.69"></a>
<FONT color="green">070</FONT>     * the sections below.<a name="line.70"></a>
<FONT color="green">071</FONT>     *<a name="line.71"></a>
<FONT color="green">072</FONT>     * &lt;p&gt;Even if your application is not &lt;i&gt;searchable&lt;/i&gt;, it can still support the invocation of<a name="line.72"></a>
<FONT color="green">073</FONT>     * search.  Please review the section &lt;a href="#HowSearchIsInvoked"&gt;How Search Is Invoked&lt;/a&gt;<a name="line.73"></a>
<FONT color="green">074</FONT>     * for more information on how to support this.<a name="line.74"></a>
<FONT color="green">075</FONT>     * <a name="line.75"></a>
<FONT color="green">076</FONT>     * &lt;p&gt;Many applications are &lt;i&gt;searchable&lt;/i&gt;.  These are <a name="line.76"></a>
<FONT color="green">077</FONT>     * the applications which can convert a query string into a list of results.  <a name="line.77"></a>
<FONT color="green">078</FONT>     * Within this subset, applications can be grouped loosely into two families:  <a name="line.78"></a>
<FONT color="green">079</FONT>     * &lt;ul&gt;&lt;li&gt;&lt;i&gt;Query Search&lt;/i&gt; applications perform batch-mode searches - each query string is <a name="line.79"></a>
<FONT color="green">080</FONT>     * converted to a list of results.&lt;/li&gt;<a name="line.80"></a>
<FONT color="green">081</FONT>     * &lt;li&gt;&lt;i&gt;Filter Search&lt;/i&gt; applications provide live filter-as-you-type searches.&lt;/li&gt;&lt;/ul&gt;<a name="line.81"></a>
<FONT color="green">082</FONT>     * &lt;p&gt;Generally speaking, you would use query search for network-based data, and filter <a name="line.82"></a>
<FONT color="green">083</FONT>     * search for local data, but this is not a hard requirement and applications <a name="line.83"></a>
<FONT color="green">084</FONT>     * are free to use the model that fits them best (or invent a new model).<a name="line.84"></a>
<FONT color="green">085</FONT>     * &lt;p&gt;It should be clear that the search implementation decouples "search <a name="line.85"></a>
<FONT color="green">086</FONT>     * invocation" from "searchable".  This satisfies the goal of making search appear<a name="line.86"></a>
<FONT color="green">087</FONT>     * to be "universal".  The user should be able to launch any search from <a name="line.87"></a>
<FONT color="green">088</FONT>     * almost any context.<a name="line.88"></a>
<FONT color="green">089</FONT>     * <a name="line.89"></a>
<FONT color="green">090</FONT>     * &lt;a name="HowSearchIsInvoked"&gt;&lt;/a&gt;<a name="line.90"></a>
<FONT color="green">091</FONT>     * &lt;h3&gt;How Search Is Invoked&lt;/h3&gt;<a name="line.91"></a>
<FONT color="green">092</FONT>     * <a name="line.92"></a>
<FONT color="green">093</FONT>     * &lt;p&gt;Unless impossible or inapplicable, all applications should support<a name="line.93"></a>
<FONT color="green">094</FONT>     * invoking the search UI.  This means that when the user invokes the search command, <a name="line.94"></a>
<FONT color="green">095</FONT>     * a search UI will be presented to them.  The search command is currently defined as a menu<a name="line.95"></a>
<FONT color="green">096</FONT>     * item called "Search" (with an alphabetic shortcut key of "S"), or on some devices, a dedicated<a name="line.96"></a>
<FONT color="green">097</FONT>     * search button key.<a name="line.97"></a>
<FONT color="green">098</FONT>     * &lt;p&gt;If your application is not inherently searchable, you can also allow the search UI<a name="line.98"></a>
<FONT color="green">099</FONT>     * to be invoked in a "web search" mode.  If the user enters a search term and clicks the <a name="line.99"></a>
<FONT color="green">100</FONT>     * "Search" button, this will bring the browser to the front and will launch a web-based<a name="line.100"></a>
<FONT color="green">101</FONT>     * search.  The user will be able to click the "Back" button and return to your application.<a name="line.101"></a>
<FONT color="green">102</FONT>     * &lt;p&gt;In general this is implemented by your activity, or the {@link android.app.Activity Activity}<a name="line.102"></a>
<FONT color="green">103</FONT>     * base class, which captures the search command and invokes the Search Manager to <a name="line.103"></a>
<FONT color="green">104</FONT>     * display and operate the search UI.  You can also cause the search UI to be presented in response<a name="line.104"></a>
<FONT color="green">105</FONT>     * to user keystrokes in your activity (for example, to instantly start filter searching while<a name="line.105"></a>
<FONT color="green">106</FONT>     * viewing a list and typing any key).<a name="line.106"></a>
<FONT color="green">107</FONT>     * &lt;p&gt;The search UI is presented as a floating <a name="line.107"></a>
<FONT color="green">108</FONT>     * window and does not cause any change in the activity stack.  If the user <a name="line.108"></a>
<FONT color="green">109</FONT>     * cancels search, the previous activity re-emerges.  If the user launches a <a name="line.109"></a>
<FONT color="green">110</FONT>     * search, this will be done by sending a search {@link android.content.Intent Intent} (see below), <a name="line.110"></a>
<FONT color="green">111</FONT>     * and the normal intent-handling sequence will take place (your activity will pause,<a name="line.111"></a>
<FONT color="green">112</FONT>     * etc.)<a name="line.112"></a>
<FONT color="green">113</FONT>     * &lt;p&gt;&lt;b&gt;What you need to do:&lt;/b&gt; First, you should consider the way in which you want to<a name="line.113"></a>
<FONT color="green">114</FONT>     * handle invoking search.  There are four broad (and partially overlapping) categories for <a name="line.114"></a>
<FONT color="green">115</FONT>     * you to choose from.<a name="line.115"></a>
<FONT color="green">116</FONT>     * &lt;ul&gt;&lt;li&gt;You can capture the search command yourself, by including a &lt;i&gt;search&lt;/i&gt;<a name="line.116"></a>
<FONT color="green">117</FONT>     * button or menu item - and invoking the search UI directly.&lt;/li&gt;<a name="line.117"></a>
<FONT color="green">118</FONT>     * &lt;li&gt;You can provide a &lt;i&gt;type-to-search&lt;/i&gt; feature, in which search is invoked automatically<a name="line.118"></a>
<FONT color="green">119</FONT>     * when the user enters any characters.&lt;/li&gt;<a name="line.119"></a>
<FONT color="green">120</FONT>     * &lt;li&gt;Even if your application is not inherently searchable, you can allow web search, <a name="line.120"></a>
<FONT color="green">121</FONT>     * via the search key (or even via a search menu item).<a name="line.121"></a>
<FONT color="green">122</FONT>     * &lt;li&gt;You can disable search entirely.  This should only be used in very rare circumstances,<a name="line.122"></a>
<FONT color="green">123</FONT>     * as search is a system-wide feature and users will expect it to be available in all contexts.&lt;/li&gt;<a name="line.123"></a>
<FONT color="green">124</FONT>     * &lt;/ul&gt;<a name="line.124"></a>
<FONT color="green">125</FONT>     * <a name="line.125"></a>
<FONT color="green">126</FONT>     * &lt;p&gt;&lt;b&gt;How to define a search menu.&lt;/b&gt;  The system provides the following resources which may<a name="line.126"></a>
<FONT color="green">127</FONT>     * be useful when adding a search item to your menu:<a name="line.127"></a>
<FONT color="green">128</FONT>     * &lt;ul&gt;&lt;li&gt;android.R.drawable.ic_search_category_default is an icon you can use in your menu.&lt;/li&gt;<a name="line.128"></a>
<FONT color="green">129</FONT>     * &lt;li&gt;{@link #MENU_KEY SearchManager.MENU_KEY} is the recommended alphabetic shortcut.&lt;/li&gt;<a name="line.129"></a>
<FONT color="green">130</FONT>     * &lt;/ul&gt;<a name="line.130"></a>
<FONT color="green">131</FONT>     * <a name="line.131"></a>
<FONT color="green">132</FONT>     * &lt;p&gt;&lt;b&gt;How to invoke search directly.&lt;/b&gt;  In order to invoke search directly, from a button<a name="line.132"></a>
<FONT color="green">133</FONT>     * or menu item, you can launch a generic search by calling<a name="line.133"></a>
<FONT color="green">134</FONT>     * {@link android.app.Activity#onSearchRequested onSearchRequested} as shown:<a name="line.134"></a>
<FONT color="green">135</FONT>     * &lt;pre class="prettyprint"&gt;<a name="line.135"></a>
<FONT color="green">136</FONT>     * onSearchRequested();&lt;/pre&gt;<a name="line.136"></a>
<FONT color="green">137</FONT>     * <a name="line.137"></a>
<FONT color="green">138</FONT>     * &lt;p&gt;&lt;b&gt;How to implement type-to-search.&lt;/b&gt;  While setting up your activity, call<a name="line.138"></a>
<FONT color="green">139</FONT>     * {@link android.app.Activity#setDefaultKeyMode setDefaultKeyMode}:<a name="line.139"></a>
<FONT color="green">140</FONT>     * &lt;pre class="prettyprint"&gt;<a name="line.140"></a>
<FONT color="green">141</FONT>     * setDefaultKeyMode(DEFAULT_KEYS_SEARCH_LOCAL);   // search within your activity<a name="line.141"></a>
<FONT color="green">142</FONT>     * setDefaultKeyMode(DEFAULT_KEYS_SEARCH_GLOBAL);  // search using platform global search&lt;/pre&gt;<a name="line.142"></a>
<FONT color="green">143</FONT>     * <a name="line.143"></a>
<FONT color="green">144</FONT>     * &lt;p&gt;&lt;b&gt;How to enable web-based search.&lt;/b&gt;  In addition to searching within your activity or<a name="line.144"></a>
<FONT color="green">145</FONT>     * application, you can also use the Search Manager to invoke a platform-global search, typically<a name="line.145"></a>
<FONT color="green">146</FONT>     * a web search.  There are two ways to do this:<a name="line.146"></a>
<FONT color="green">147</FONT>     * &lt;ul&gt;&lt;li&gt;You can simply define "search" within your application or activity to mean global search.<a name="line.147"></a>
<FONT color="green">148</FONT>     * This is described in more detail in the <a name="line.148"></a>
<FONT color="green">149</FONT>     * &lt;a href="#SearchabilityMetadata"&gt;Searchability Metadata&lt;/a&gt; section.  Briefly, you will<a name="line.149"></a>
<FONT color="green">150</FONT>     * add a single meta-data entry to your manifest, declaring that the default search<a name="line.150"></a>
<FONT color="green">151</FONT>     * for your application is "*".  This indicates to the system that no application-specific<a name="line.151"></a>
<FONT color="green">152</FONT>     * search activity is provided, and that it should launch web-based search instead.&lt;/li&gt;<a name="line.152"></a>
<FONT color="green">153</FONT>     * &lt;li&gt;You can specify this at invocation time via default keys (see above), overriding<a name="line.153"></a>
<FONT color="green">154</FONT>     * {@link android.app.Activity#onSearchRequested}, or via a direct call to <a name="line.154"></a>
<FONT color="green">155</FONT>     * {@link android.app.Activity#startSearch}.  This is most useful if you wish to provide local<a name="line.155"></a>
<FONT color="green">156</FONT>     * searchability &lt;i&gt;and&lt;/i&gt; access to global search.&lt;/li&gt;&lt;/ul&gt; <a name="line.156"></a>
<FONT color="green">157</FONT>     * <a name="line.157"></a>
<FONT color="green">158</FONT>     * &lt;p&gt;&lt;b&gt;How to disable search from your activity.&lt;/b&gt;  search is a system-wide feature and users<a name="line.158"></a>
<FONT color="green">159</FONT>     * will expect it to be available in all contexts.  If your UI design absolutely precludes<a name="line.159"></a>
<FONT color="green">160</FONT>     * launching search, override {@link android.app.Activity#onSearchRequested onSearchRequested}<a name="line.160"></a>
<FONT color="green">161</FONT>     * as shown:<a name="line.161"></a>
<FONT color="green">162</FONT>     * &lt;pre class="prettyprint"&gt;<a name="line.162"></a>
<FONT color="green">163</FONT>     * &amp;#64;Override<a name="line.163"></a>
<FONT color="green">164</FONT>     * public boolean onSearchRequested() {<a name="line.164"></a>
<FONT color="green">165</FONT>     *    return false;<a name="line.165"></a>
<FONT color="green">166</FONT>     * }&lt;/pre&gt; <a name="line.166"></a>
<FONT color="green">167</FONT>     * <a name="line.167"></a>
<FONT color="green">168</FONT>     * &lt;p&gt;&lt;b&gt;Managing focus and knowing if Search is active.&lt;/b&gt;  The search UI is not a separate<a name="line.168"></a>
<FONT color="green">169</FONT>     * activity, and when the UI is invoked or dismissed, your activity will not typically be paused,<a name="line.169"></a>
<FONT color="green">170</FONT>     * resumed, or otherwise notified by the methods defined in <a name="line.170"></a>
<FONT color="green">171</FONT>     * &lt;a href="{@docRoot}guide/topics/fundamentals.html#actlife"&gt;Application Fundamentals: <a name="line.171"></a>
<FONT color="green">172</FONT>     * Activity Lifecycle&lt;/a&gt;.  The search UI is<a name="line.172"></a>
<FONT color="green">173</FONT>     * handled in the same way as other system UI elements which may appear from time to time, such as <a name="line.173"></a>
<FONT color="green">174</FONT>     * notifications, screen locks, or other system alerts:  <a name="line.174"></a>
<FONT color="green">175</FONT>     * &lt;p&gt;When the search UI appears, your activity will lose input focus.<a name="line.175"></a>
<FONT color="green">176</FONT>     * &lt;p&gt;When the search activity is dismissed, there are three possible outcomes:<a name="line.176"></a>
<FONT color="green">177</FONT>     * &lt;ul&gt;&lt;li&gt;If the user simply canceled the search UI, your activity will regain input focus and<a name="line.177"></a>
<FONT color="green">178</FONT>     * proceed as before.  See {@link #setOnDismissListener} and {@link #setOnCancelListener} if you <a name="line.178"></a>
<FONT color="green">179</FONT>     * required direct notification of search dialog dismissals.&lt;/li&gt;<a name="line.179"></a>
<FONT color="green">180</FONT>     * &lt;li&gt;If the user launched a search, and this required switching to another activity to receive<a name="line.180"></a>
<FONT color="green">181</FONT>     * and process the search {@link android.content.Intent Intent}, your activity will receive the <a name="line.181"></a>
<FONT color="green">182</FONT>     * normal sequence of activity pause or stop notifications.&lt;/li&gt;<a name="line.182"></a>
<FONT color="green">183</FONT>     * &lt;li&gt;If the user launched a search, and the current activity is the recipient of the search <a name="line.183"></a>
<FONT color="green">184</FONT>     * {@link android.content.Intent Intent}, you will receive notification via the <a name="line.184"></a>
<FONT color="green">185</FONT>     * {@link android.app.Activity#onNewIntent onNewIntent()} method.&lt;/li&gt;&lt;/ul&gt;<a name="line.185"></a>
<FONT color="green">186</FONT>     * &lt;p&gt;This list is provided in order to clarify the ways in which your activities will interact with<a name="line.186"></a>
<FONT color="green">187</FONT>     * the search UI.  More details on searchable activities and search intents are provided in the<a name="line.187"></a>
<FONT color="green">188</FONT>     * sections below.<a name="line.188"></a>
<FONT color="green">189</FONT>     *<a name="line.189"></a>
<FONT color="green">190</FONT>     * &lt;a name="QuerySearchApplications"&gt;&lt;/a&gt;<a name="line.190"></a>
<FONT color="green">191</FONT>     * &lt;h3&gt;Query-Search Applications&lt;/h3&gt;<a name="line.191"></a>
<FONT color="green">192</FONT>     * <a name="line.192"></a>
<FONT color="green">193</FONT>     * &lt;p&gt;Query-search applications are those that take a single query (e.g. a search<a name="line.193"></a>
<FONT color="green">194</FONT>     * string) and present a set of results that may fit.  Primary examples include<a name="line.194"></a>
<FONT color="green">195</FONT>     * web queries, map lookups, or email searches (with the common thread being<a name="line.195"></a>
<FONT color="green">196</FONT>     * network query dispatch).  It may also be the case that certain local searches<a name="line.196"></a>
<FONT color="green">197</FONT>     * are treated this way.  It's up to the application to decide.<a name="line.197"></a>
<FONT color="green">198</FONT>     *<a name="line.198"></a>
<FONT color="green">199</FONT>     * &lt;p&gt;&lt;b&gt;What you need to do:&lt;/b&gt;  The following steps are necessary in order to<a name="line.199"></a>
<FONT color="green">200</FONT>     * implement query search.<a name="line.200"></a>
<FONT color="green">201</FONT>     * &lt;ul&gt;<a name="line.201"></a>
<FONT color="green">202</FONT>     * &lt;li&gt;Implement search invocation as described above.  (Strictly speaking, <a name="line.202"></a>
<FONT color="green">203</FONT>     * these are decoupled, but it would make little sense to be "searchable" but not <a name="line.203"></a>
<FONT color="green">204</FONT>     * "search-invoking".)&lt;/li&gt;<a name="line.204"></a>
<FONT color="green">205</FONT>     * &lt;li&gt;Your application should have an activity that takes a search string and<a name="line.205"></a>
<FONT color="green">206</FONT>     * converts it to a list of results.  This could be your primary display activity<a name="line.206"></a>
<FONT color="green">207</FONT>     * or it could be a dedicated search results activity.  This is your &lt;i&gt;searchable&lt;/i&gt;<a name="line.207"></a>
<FONT color="green">208</FONT>     * activity and every query-search application must have one.&lt;/li&gt;<a name="line.208"></a>
<FONT color="green">209</FONT>     * &lt;li&gt;In the searchable activity, in onCreate(), you must receive and handle the <a name="line.209"></a>
<FONT color="green">210</FONT>     * {@link android.content.Intent#ACTION_SEARCH ACTION_SEARCH}<a name="line.210"></a>
<FONT color="green">211</FONT>     * {@link android.content.Intent Intent}.  The text to search (query string) for is provided by <a name="line.211"></a>
<FONT color="green">212</FONT>     * calling <a name="line.212"></a>
<FONT color="green">213</FONT>     * {@link #QUERY getStringExtra(SearchManager.QUERY)}.&lt;/li&gt;<a name="line.213"></a>
<FONT color="green">214</FONT>     * &lt;li&gt;To identify and support your searchable activity, you'll need to <a name="line.214"></a>
<FONT color="green">215</FONT>     * provide an XML file providing searchability configuration parameters, a reference to that <a name="line.215"></a>
<FONT color="green">216</FONT>     * in your searchable activity's &lt;a href="{@docRoot}guide/topics/manifest/manifest-intro.html"&gt;manifest&lt;/a&gt;<a name="line.216"></a>
<FONT color="green">217</FONT>     * entry, and an intent-filter declaring that you can <a name="line.217"></a>
<FONT color="green">218</FONT>     * receive ACTION_SEARCH intents.  This is described in more detail in the <a name="line.218"></a>
<FONT color="green">219</FONT>     * &lt;a href="#SearchabilityMetadata"&gt;Searchability Metadata&lt;/a&gt; section.&lt;/li&gt;<a name="line.219"></a>
<FONT color="green">220</FONT>     * &lt;li&gt;Your &lt;a href="{@docRoot}guide/topics/manifest/manifest-intro.html"&gt;manifest&lt;/a&gt; also needs a metadata entry<a name="line.220"></a>
<FONT color="green">221</FONT>     * providing a global reference to the searchable activity.  This is the "glue" directing the search<a name="line.221"></a>
<FONT color="green">222</FONT>     * UI, when invoked from any of your &lt;i&gt;other&lt;/i&gt; activities, to use your application as the<a name="line.222"></a>
<FONT color="green">223</FONT>     * default search context.  This is also described in more detail in the <a name="line.223"></a>
<FONT color="green">224</FONT>     * &lt;a href="#SearchabilityMetadata"&gt;Searchability Metadata&lt;/a&gt; section.&lt;/li&gt; <a name="line.224"></a>
<FONT color="green">225</FONT>     * &lt;li&gt;Finally, you may want to define your search results activity as with the <a name="line.225"></a>
<FONT color="green">226</FONT>     * {@link android.R.attr#launchMode singleTop} launchMode flag.  This allows the system <a name="line.226"></a>
<FONT color="green">227</FONT>     * to launch searches from/to the same activity without creating a pile of them on the <a name="line.227"></a>
<FONT color="green">228</FONT>     * activity stack.  If you do this, be sure to also override <a name="line.228"></a>
<FONT color="green">229</FONT>     * {@link android.app.Activity#onNewIntent onNewIntent} to handle the<a name="line.229"></a>
<FONT color="green">230</FONT>     * updated intents (with new queries) as they arrive.&lt;/li&gt;<a name="line.230"></a>
<FONT color="green">231</FONT>     * &lt;/ul&gt;<a name="line.231"></a>
<FONT color="green">232</FONT>     *<a name="line.232"></a>
<FONT color="green">233</FONT>     * &lt;p&gt;Code snippet showing handling of intents in your search activity:<a name="line.233"></a>
<FONT color="green">234</FONT>     * &lt;pre class="prettyprint"&gt;<a name="line.234"></a>
<FONT color="green">235</FONT>     * &amp;#64;Override<a name="line.235"></a>
<FONT color="green">236</FONT>     * protected void onCreate(Bundle icicle) {<a name="line.236"></a>
<FONT color="green">237</FONT>     *     super.onCreate(icicle);<a name="line.237"></a>
<FONT color="green">238</FONT>     *     <a name="line.238"></a>
<FONT color="green">239</FONT>     *     final Intent queryIntent = getIntent();<a name="line.239"></a>
<FONT color="green">240</FONT>     *     final String queryAction = queryIntent.getAction();<a name="line.240"></a>
<FONT color="green">241</FONT>     *     if (Intent.ACTION_SEARCH.equals(queryAction)) {<a name="line.241"></a>
<FONT color="green">242</FONT>     *         doSearchWithIntent(queryIntent);<a name="line.242"></a>
<FONT color="green">243</FONT>     *     }<a name="line.243"></a>
<FONT color="green">244</FONT>     * }<a name="line.244"></a>
<FONT color="green">245</FONT>     * <a name="line.245"></a>
<FONT color="green">246</FONT>     * private void doSearchWithIntent(final Intent queryIntent) {<a name="line.246"></a>
<FONT color="green">247</FONT>     *     final String queryString = queryIntent.getStringExtra(SearchManager.QUERY);<a name="line.247"></a>
<FONT color="green">248</FONT>     *     doSearchWithQuery(queryString);<a name="line.248"></a>
<FONT color="green">249</FONT>     * }&lt;/pre&gt;<a name="line.249"></a>
<FONT color="green">250</FONT>     * <a name="line.250"></a>
<FONT color="green">251</FONT>     * &lt;a name="FilterSearchApplications"&gt;&lt;/a&gt;<a name="line.251"></a>
<FONT color="green">252</FONT>     * &lt;h3&gt;Filter-Search Applications&lt;/h3&gt;<a name="line.252"></a>
<FONT color="green">253</FONT>     * <a name="line.253"></a>
<FONT color="green">254</FONT>     * &lt;p&gt;Filter-search applications are those that use live text entry (e.g. keystrokes)) to<a name="line.254"></a>
<FONT color="green">255</FONT>     * display and continuously update a list of results.  Primary examples include applications<a name="line.255"></a>
<FONT color="green">256</FONT>     * that use locally-stored data.<a name="line.256"></a>
<FONT color="green">257</FONT>     * <a name="line.257"></a>
<FONT color="green">258</FONT>     * &lt;p&gt;Filter search is not directly supported by the Search Manager.  Most filter search<a name="line.258"></a>
<FONT color="green">259</FONT>     * implementations will use variants of {@link android.widget.Filterable}, such as a <a name="line.259"></a>
<FONT color="green">260</FONT>     * {@link android.widget.ListView} bound to a {@link android.widget.SimpleCursorAdapter}.  However,<a name="line.260"></a>
<FONT color="green">261</FONT>     * you may find it useful to mix them together, by declaring your filtered view searchable.  With<a name="line.261"></a>
<FONT color="green">262</FONT>     * this configuration, you can still present the standard search dialog in all activities<a name="line.262"></a>
<FONT color="green">263</FONT>     * within your application, but transition to a filtered search when you enter the activity<a name="line.263"></a>
<FONT color="green">264</FONT>     * and display the results.<a name="line.264"></a>
<FONT color="green">265</FONT>     * <a name="line.265"></a>
<FONT color="green">266</FONT>     * &lt;a name="Suggestions"&gt;&lt;/a&gt;<a name="line.266"></a>
<FONT color="green">267</FONT>     * &lt;h3&gt;Search Suggestions&lt;/h3&gt;<a name="line.267"></a>
<FONT color="green">268</FONT>     * <a name="line.268"></a>
<FONT color="green">269</FONT>     * &lt;p&gt;A powerful feature of the Search Manager is the ability of any application to easily provide<a name="line.269"></a>
<FONT color="green">270</FONT>     * live "suggestions" in order to prompt the user.  Each application implements suggestions in a <a name="line.270"></a>
<FONT color="green">271</FONT>     * different, unique, and appropriate way.  Suggestions be drawn from many sources, including but <a name="line.271"></a>
<FONT color="green">272</FONT>     * not limited to:<a name="line.272"></a>
<FONT color="green">273</FONT>     * &lt;ul&gt;<a name="line.273"></a>
<FONT color="green">274</FONT>     * &lt;li&gt;Actual searchable results (e.g. names in the address book)&lt;/li&gt;<a name="line.274"></a>
<FONT color="green">275</FONT>     * &lt;li&gt;Recently entered queries&lt;/li&gt;<a name="line.275"></a>
<FONT color="green">276</FONT>     * &lt;li&gt;Recently viewed data or results&lt;/li&gt;<a name="line.276"></a>
<FONT color="green">277</FONT>     * &lt;li&gt;Contextually appropriate queries or results&lt;/li&gt;<a name="line.277"></a>
<FONT color="green">278</FONT>     * &lt;li&gt;Summaries of possible results&lt;/li&gt;<a name="line.278"></a>
<FONT color="green">279</FONT>     * &lt;/ul&gt;<a name="line.279"></a>
<FONT color="green">280</FONT>     * <a name="line.280"></a>
<FONT color="green">281</FONT>     * &lt;p&gt;Another feature of suggestions is that they can expose queries or results before the user<a name="line.281"></a>
<FONT color="green">282</FONT>     * ever visits the application.  This reduces the amount of context switching required, and helps<a name="line.282"></a>
<FONT color="green">283</FONT>     * the user access their data quickly and with less context shifting.  In order to provide this<a name="line.283"></a>
<FONT color="green">284</FONT>     * capability, suggestions are accessed via a <a name="line.284"></a>
<FONT color="green">285</FONT>     * {@link android.content.ContentProvider Content Provider}.  <a name="line.285"></a>
<FONT color="green">286</FONT>     * <a name="line.286"></a>
<FONT color="green">287</FONT>     * &lt;p&gt;The primary form of suggestions is known as &lt;i&gt;queried suggestions&lt;/i&gt; and is based on query<a name="line.287"></a>
<FONT color="green">288</FONT>     * text that the user has already typed.  This would generally be based on partial matches in<a name="line.288"></a>
<FONT color="green">289</FONT>     * the available data.  In certain situations - for example, when no query text has been typed yet -<a name="line.289"></a>
<FONT color="green">290</FONT>     * an application may also opt to provide &lt;i&gt;zero-query suggestions&lt;/i&gt;.<a name="line.290"></a>
<FONT color="green">291</FONT>     * These would typically be drawn from the same data source, but because no partial query text is <a name="line.291"></a>
<FONT color="green">292</FONT>     * available, they should be weighted based on other factors - for example, most recent queries <a name="line.292"></a>
<FONT color="green">293</FONT>     * or most recent results.<a name="line.293"></a>
<FONT color="green">294</FONT>     * <a name="line.294"></a>
<FONT color="green">295</FONT>     * &lt;p&gt;&lt;b&gt;Overview of how suggestions are provided.&lt;/b&gt;  When the search manager identifies a <a name="line.295"></a>
<FONT color="green">296</FONT>     * particular activity as searchable, it will check for certain metadata which indicates that<a name="line.296"></a>
<FONT color="green">297</FONT>     * there is also a source of suggestions.  If suggestions are provided, the following steps are<a name="line.297"></a>
<FONT color="green">298</FONT>     * taken.<a name="line.298"></a>
<FONT color="green">299</FONT>     * &lt;ul&gt;&lt;li&gt;Using formatting information found in the metadata, the user's query text (whatever<a name="line.299"></a>
<FONT color="green">300</FONT>     * has been typed so far) will be formatted into a query and sent to the suggestions <a name="line.300"></a>
<FONT color="green">301</FONT>     * {@link android.content.ContentProvider Content Provider}.&lt;/li&gt;<a name="line.301"></a>
<FONT color="green">302</FONT>     * &lt;li&gt;The suggestions {@link android.content.ContentProvider Content Provider} will create a<a name="line.302"></a>
<FONT color="green">303</FONT>     * {@link android.database.Cursor Cursor} which can iterate over the possible suggestions.&lt;/li&gt;<a name="line.303"></a>
<FONT color="green">304</FONT>     * &lt;li&gt;The search manager will populate a list using display data found in each row of the cursor,<a name="line.304"></a>
<FONT color="green">305</FONT>     * and display these suggestions to the user.&lt;/li&gt;<a name="line.305"></a>
<FONT color="green">306</FONT>     * &lt;li&gt;If the user types another key, or changes the query in any way, the above steps are repeated<a name="line.306"></a>
<FONT color="green">307</FONT>     * and the suggestions list is updated or repopulated.&lt;/li&gt;<a name="line.307"></a>
<FONT color="green">308</FONT>     * &lt;li&gt;If the user clicks or touches the "GO" button, the suggestions are ignored and the search is<a name="line.308"></a>
<FONT color="green">309</FONT>     * launched using the normal {@link android.content.Intent#ACTION_SEARCH ACTION_SEARCH} type of <a name="line.309"></a>
<FONT color="green">310</FONT>     * {@link android.content.Intent Intent}.&lt;/li&gt;<a name="line.310"></a>
<FONT color="green">311</FONT>     * &lt;li&gt;If the user uses the directional controls to navigate the focus into the suggestions list,<a name="line.311"></a>
<FONT color="green">312</FONT>     * the query text will be updated while the user navigates from suggestion to suggestion.  The user<a name="line.312"></a>
<FONT color="green">313</FONT>     * can then click or touch the updated query and edit it further.  If the user navigates back to<a name="line.313"></a>
<FONT color="green">314</FONT>     * the edit field, the original typed query is restored.&lt;/li&gt;<a name="line.314"></a>
<FONT color="green">315</FONT>     * &lt;li&gt;If the user clicks or touches a particular suggestion, then a combination of data from the <a name="line.315"></a>
<FONT color="green">316</FONT>     * cursor and<a name="line.316"></a>
<FONT color="green">317</FONT>     * values found in the metadata are used to synthesize an Intent and send it to the application.<a name="line.317"></a>
<FONT color="green">318</FONT>     * Depending on the design of the activity and the way it implements search, this might be a<a name="line.318"></a>
<FONT color="green">319</FONT>     * {@link android.content.Intent#ACTION_SEARCH ACTION_SEARCH} (in order to launch a query), or it<a name="line.319"></a>
<FONT color="green">320</FONT>     * might be a {@link android.content.Intent#ACTION_VIEW ACTION_VIEW}, in order to proceed directly<a name="line.320"></a>
<FONT color="green">321</FONT>     * to display of specific data.&lt;/li&gt;<a name="line.321"></a>
<FONT color="green">322</FONT>     * &lt;/ul&gt;<a name="line.322"></a>
<FONT color="green">323</FONT>     *  <a name="line.323"></a>
<FONT color="green">324</FONT>     * &lt;p&gt;&lt;b&gt;Simple Recent-Query-Based Suggestions.&lt;/b&gt;  The Android framework provides a simple Search<a name="line.324"></a>
<FONT color="green">325</FONT>     * Suggestions provider, which simply records and replays recent queries.  For many applications,<a name="line.325"></a>
<FONT color="green">326</FONT>     * this will be sufficient.  The basic steps you will need to<a name="line.326"></a>
<FONT color="green">327</FONT>     * do, in order to use the built-in recent queries suggestions provider, are as follows:<a name="line.327"></a>
<FONT color="green">328</FONT>     * &lt;ul&gt;<a name="line.328"></a>
<FONT color="green">329</FONT>     * &lt;li&gt;Implement and test query search, as described in the previous sections.&lt;/li&gt;<a name="line.329"></a>
<FONT color="green">330</FONT>     * &lt;li&gt;Create a Provider within your application by extending <a name="line.330"></a>
<FONT color="green">331</FONT>     * {@link android.content.SearchRecentSuggestionsProvider}.&lt;/li&gt;<a name="line.331"></a>
<FONT color="green">332</FONT>     * &lt;li&gt;Create a manifest entry describing your provider.&lt;/li&gt;<a name="line.332"></a>
<FONT color="green">333</FONT>     * &lt;li&gt;Update your searchable activity's XML configuration file with information about your<a name="line.333"></a>
<FONT color="green">334</FONT>     * provider.&lt;/li&gt;<a name="line.334"></a>
<FONT color="green">335</FONT>     * &lt;li&gt;In your searchable activities, capture any user-generated queries and record them<a name="line.335"></a>
<FONT color="green">336</FONT>     * for future searches by calling {@link android.provider.SearchRecentSuggestions#saveRecentQuery}.<a name="line.336"></a>
<FONT color="green">337</FONT>     * &lt;/li&gt;<a name="line.337"></a>
<FONT color="green">338</FONT>     * &lt;/ul&gt;<a name="line.338"></a>
<FONT color="green">339</FONT>     * &lt;p&gt;For complete implementation details, please refer to <a name="line.339"></a>
<FONT color="green">340</FONT>     * {@link android.content.SearchRecentSuggestionsProvider}.  The rest of the information in this<a name="line.340"></a>
<FONT color="green">341</FONT>     * section should not be necessary, as it refers to custom suggestions providers.<a name="line.341"></a>
<FONT color="green">342</FONT>     * <a name="line.342"></a>
<FONT color="green">343</FONT>     * &lt;p&gt;&lt;b&gt;Creating a Customized Suggestions Provider:&lt;/b&gt;  In order to create more sophisticated<a name="line.343"></a>
<FONT color="green">344</FONT>     * suggestion providers, you'll need to take the following steps:<a name="line.344"></a>
<FONT color="green">345</FONT>     * &lt;ul&gt;<a name="line.345"></a>
<FONT color="green">346</FONT>     * &lt;li&gt;Implement and test query search, as described in the previous sections.&lt;/li&gt;<a name="line.346"></a>
<FONT color="green">347</FONT>     * &lt;li&gt;Decide how you wish to &lt;i&gt;receive&lt;/i&gt; suggestions.  Just like queries that the user enters,<a name="line.347"></a>
<FONT color="green">348</FONT>     * suggestions will be delivered to your searchable activity as <a name="line.348"></a>
<FONT color="green">349</FONT>     * {@link android.content.Intent Intent} messages;  Unlike simple queries, you have quite a bit of<a name="line.349"></a>
<FONT color="green">350</FONT>     * flexibility in forming those intents.  A query search application will probably<a name="line.350"></a>
<FONT color="green">351</FONT>     * wish to continue receiving the {@link android.content.Intent#ACTION_SEARCH ACTION_SEARCH} <a name="line.351"></a>
<FONT color="green">352</FONT>     * {@link android.content.Intent Intent}, which will launch a query search using query text as<a name="line.352"></a>
<FONT color="green">353</FONT>     * provided by the suggestion.  A filter search application will probably wish to <a name="line.353"></a>
<FONT color="green">354</FONT>     * receive the {@link android.content.Intent#ACTION_VIEW ACTION_VIEW} <a name="line.354"></a>
<FONT color="green">355</FONT>     * {@link android.content.Intent Intent}, which will take the user directly to a selected entry.<a name="line.355"></a>
<FONT color="green">356</FONT>     * Other interesting suggestions, including hybrids, are possible, and the suggestion provider<a name="line.356"></a>
<FONT color="green">357</FONT>     * can easily mix-and-match results to provide a richer set of suggestions for the user.  Finally,<a name="line.357"></a>
<FONT color="green">358</FONT>     * you'll need to update your searchable activity (or other activities) to receive the intents<a name="line.358"></a>
<FONT color="green">359</FONT>     * as you've defined them.&lt;/li&gt;<a name="line.359"></a>
<FONT color="green">360</FONT>     * &lt;li&gt;Implement a Content Provider that provides suggestions.  If you already have one, and it <a name="line.360"></a>
<FONT color="green">361</FONT>     * has access to your suggestions data.  If not, you'll have to create one.<a name="line.361"></a>
<FONT color="green">362</FONT>     * You'll also provide information about your Content Provider in your <a name="line.362"></a>
<FONT color="green">363</FONT>     * package's &lt;a href="{@docRoot}guide/topics/manifest/manifest-intro.html"&gt;manifest&lt;/a&gt;.&lt;/li&gt;<a name="line.363"></a>
<FONT color="green">364</FONT>     * &lt;li&gt;Update your searchable activity's XML configuration file.  There are two categories of<a name="line.364"></a>
<FONT color="green">365</FONT>     * information used for suggestions:<a name="line.365"></a>
<FONT color="green">366</FONT>     * &lt;ul&gt;&lt;li&gt;The first is (required) data that the search manager will<a name="line.366"></a>
<FONT color="green">367</FONT>     * use to format the queries which are sent to the Content Provider.&lt;/li&gt;<a name="line.367"></a>
<FONT color="green">368</FONT>     * &lt;li&gt;The second is (optional) parameters to configure structure<a name="line.368"></a>
<FONT color="green">369</FONT>     * if intents generated by suggestions.&lt;/li&gt;&lt;/li&gt;<a name="line.369"></a>
<FONT color="green">370</FONT>     * &lt;/ul&gt;<a name="line.370"></a>
<FONT color="green">371</FONT>     * &lt;/ul&gt;<a name="line.371"></a>
<FONT color="green">372</FONT>     * <a name="line.372"></a>
<FONT color="green">373</FONT>     * &lt;p&gt;&lt;b&gt;Configuring your Content Provider to Receive Suggestion Queries.&lt;/b&gt;  The basic job of<a name="line.373"></a>
<FONT color="green">374</FONT>     * a search suggestions {@link android.content.ContentProvider Content Provider} is to provide<a name="line.374"></a>
<FONT color="green">375</FONT>     * "live" (while-you-type) conversion of the user's query text into a set of zero or more <a name="line.375"></a>
<FONT color="green">376</FONT>     * suggestions.  Each application is free to define the conversion, and as described above there are<a name="line.376"></a>
<FONT color="green">377</FONT>     * many possible solutions.  This section simply defines how to communicate with the suggestion<a name="line.377"></a>
<FONT color="green">378</FONT>     * provider.  <a name="line.378"></a>
<FONT color="green">379</FONT>     * <a name="line.379"></a>
<FONT color="green">380</FONT>     * &lt;p&gt;The Search Manager must first determine if your package provides suggestions.  This is done<a name="line.380"></a>
<FONT color="green">381</FONT>     * by examination of your searchable meta-data XML file.  The android:searchSuggestAuthority<a name="line.381"></a>
<FONT color="green">382</FONT>     * attribute, if provided, is the signal to obtain &amp; display suggestions.<a name="line.382"></a>
<FONT color="green">383</FONT>     * <a name="line.383"></a>
<FONT color="green">384</FONT>     * &lt;p&gt;Every query includes a Uri, and the Search Manager will format the Uri as shown:<a name="line.384"></a>
<FONT color="green">385</FONT>     * &lt;p&gt;&lt;pre class="prettyprint"&gt;<a name="line.385"></a>
<FONT color="green">386</FONT>     * content:// your.suggest.authority / your.suggest.path / SearchManager.SUGGEST_URI_PATH_QUERY&lt;/pre&gt;<a name="line.386"></a>
<FONT color="green">387</FONT>     * <a name="line.387"></a>
<FONT color="green">388</FONT>     * &lt;p&gt;Your Content Provider can receive the query text in one of two ways.<a name="line.388"></a>
<FONT color="green">389</FONT>     * &lt;ul&gt;<a name="line.389"></a>
<FONT color="green">390</FONT>     * &lt;li&gt;&lt;b&gt;Query provided as a selection argument.&lt;/b&gt;  If you define the attribute value<a name="line.390"></a>
<FONT color="green">391</FONT>     * android:searchSuggestSelection and include a string, this string will be passed as the <a name="line.391"></a>
<FONT color="green">392</FONT>     * &lt;i&gt;selection&lt;/i&gt; parameter to your Content Provider's query function.  You must define a single<a name="line.392"></a>
<FONT color="green">393</FONT>     * selection argument, using the '?' character.  The user's query text will be passed to you<a name="line.393"></a>
<FONT color="green">394</FONT>     * as the first element of the selection arguments array.&lt;/li&gt;<a name="line.394"></a>
<FONT color="green">395</FONT>     * &lt;li&gt;&lt;b&gt;Query provided with Data Uri.&lt;/b&gt;  If you &lt;i&gt;do not&lt;/i&gt; define the attribute value<a name="line.395"></a>
<FONT color="green">396</FONT>     * android:searchSuggestSelection, then the Search Manager will append another "/" followed by<a name="line.396"></a>
<FONT color="green">397</FONT>     * the user's query to the query Uri.  The query will be encoding using Uri encoding rules - don't<a name="line.397"></a>
<FONT color="green">398</FONT>     * forget to decode it.  (See {@link android.net.Uri#getPathSegments} and<a name="line.398"></a>
<FONT color="green">399</FONT>     * {@link android.net.Uri#getLastPathSegment} for helpful utilities you can use here.)&lt;/li&gt;<a name="line.399"></a>
<FONT color="green">400</FONT>     * &lt;/ul&gt;<a name="line.400"></a>
<FONT color="green">401</FONT>     * <a name="line.401"></a>
<FONT color="green">402</FONT>     * &lt;p&gt;&lt;b&gt;Handling empty queries.&lt;/b&gt;  Your application should handle the "empty query"<a name="line.402"></a>
<FONT color="green">403</FONT>     * (no user text entered) case properly, and generate useful suggestions in this case.  There are a<a name="line.403"></a>
<FONT color="green">404</FONT>     * number of ways to do this;  Two are outlined here:<a name="line.404"></a>
<FONT color="green">405</FONT>     * &lt;ul&gt;&lt;li&gt;For a simple filter search of local data, you could simply present the entire dataset,<a name="line.405"></a>
<FONT color="green">406</FONT>     * unfiltered.  (example: People)&lt;/li&gt;<a name="line.406"></a>
<FONT color="green">407</FONT>     * &lt;li&gt;For a query search, you could simply present the most recent queries.  This allows the user<a name="line.407"></a>
<FONT color="green">408</FONT>     * to quickly repeat a recent search.&lt;/li&gt;&lt;/ul&gt;<a name="line.408"></a>
<FONT color="green">409</FONT>     * <a name="line.409"></a>
<FONT color="green">410</FONT>     * &lt;p&gt;&lt;b&gt;The Format of Individual Suggestions.&lt;/b&gt;  Your suggestions are communicated back to the<a name="line.410"></a>
<FONT color="green">411</FONT>     * Search Manager by way of a {@link android.database.Cursor Cursor}.  The Search Manager will<a name="line.411"></a>
<FONT color="green">412</FONT>     * usually pass a null Projection, which means that your provider can simply return all appropriate<a name="line.412"></a>
<FONT color="green">413</FONT>     * columns for each suggestion.  The columns currently defined are:<a name="line.413"></a>
<FONT color="green">414</FONT>     * <a name="line.414"></a>
<FONT color="green">415</FONT>     * &lt;table border="2" width="85%" align="center" frame="hsides" rules="rows"&gt;<a name="line.415"></a>
<FONT color="green">416</FONT>     *<a name="line.416"></a>
<FONT color="green">417</FONT>     *     &lt;thead&gt;<a name="line.417"></a>
<FONT color="green">418</FONT>     *     &lt;tr&gt;&lt;th&gt;Column Name&lt;/th&gt; &lt;th&gt;Description&lt;/th&gt; &lt;th&gt;Required?&lt;/th&gt;&lt;/tr&gt;<a name="line.418"></a>
<FONT color="green">419</FONT>     *     &lt;/thead&gt;<a name="line.419"></a>
<FONT color="green">420</FONT>     *<a name="line.420"></a>
<FONT color="green">421</FONT>     *     &lt;tbody&gt;<a name="line.421"></a>
<FONT color="green">422</FONT>     *     &lt;tr&gt;&lt;th&gt;{@link #SUGGEST_COLUMN_FORMAT}&lt;/th&gt;<a name="line.422"></a>
<FONT color="green">423</FONT>     *         &lt;td&gt;&lt;i&gt;Unused - can be null.&lt;/i&gt;&lt;/td&gt;<a name="line.423"></a>
<FONT color="green">424</FONT>     *         &lt;td align="center"&gt;No&lt;/td&gt;<a name="line.424"></a>
<FONT color="green">425</FONT>     *     &lt;/tr&gt;<a name="line.425"></a>
<FONT color="green">426</FONT>     *     <a name="line.426"></a>
<FONT color="green">427</FONT>     *     &lt;tr&gt;&lt;th&gt;{@link #SUGGEST_COLUMN_TEXT_1}&lt;/th&gt;<a name="line.427"></a>
<FONT color="green">428</FONT>     *         &lt;td&gt;This is the line of text that will be presented to the user as the suggestion.&lt;/td&gt;<a name="line.428"></a>
<FONT color="green">429</FONT>     *         &lt;td align="center"&gt;Yes&lt;/td&gt;<a name="line.429"></a>
<FONT color="green">430</FONT>     *     &lt;/tr&gt;<a name="line.430"></a>
<FONT color="green">431</FONT>     *     <a name="line.431"></a>
<FONT color="green">432</FONT>     *     &lt;tr&gt;&lt;th&gt;{@link #SUGGEST_COLUMN_TEXT_2}&lt;/th&gt;<a name="line.432"></a>
<FONT color="green">433</FONT>     *         &lt;td&gt;If your cursor includes this column, then all suggestions will be provided in a <a name="line.433"></a>
<FONT color="green">434</FONT>     *             two-line format.  The data in this column will be displayed as a second, smaller<a name="line.434"></a>
<FONT color="green">435</FONT>     *             line of text below the primary suggestion, or it can be null or empty to indicate no<a name="line.435"></a>
<FONT color="green">436</FONT>     *             text in this row's suggestion.&lt;/td&gt;<a name="line.436"></a>
<FONT color="green">437</FONT>     *         &lt;td align="center"&gt;No&lt;/td&gt;<a name="line.437"></a>
<FONT color="green">438</FONT>     *     &lt;/tr&gt;<a name="line.438"></a>
<FONT color="green">439</FONT>     *     <a name="line.439"></a>
<FONT color="green">440</FONT>     *     &lt;tr&gt;&lt;th&gt;{@link #SUGGEST_COLUMN_ICON_1}&lt;/th&gt;<a name="line.440"></a>
<FONT color="green">441</FONT>     *         &lt;td&gt;If your cursor includes this column, then all suggestions will be provided in an<a name="line.441"></a>
<FONT color="green">442</FONT>     *             icons+text format.  This value should be a reference (resource ID) of the icon to<a name="line.442"></a>
<FONT color="green">443</FONT>     *             draw on the left side, or it can be null or zero to indicate no icon in this row.<a name="line.443"></a>
<FONT color="green">444</FONT>     *             You must provide both cursor columns, or neither.<a name="line.444"></a>
<FONT color="green">445</FONT>     *             &lt;/td&gt;<a name="line.445"></a>
<FONT color="green">446</FONT>     *         &lt;td align="center"&gt;No, but required if you also have {@link #SUGGEST_COLUMN_ICON_2}&lt;/td&gt;<a name="line.446"></a>
<FONT color="green">447</FONT>     *     &lt;/tr&gt;<a name="line.447"></a>
<FONT color="green">448</FONT>     *     <a name="line.448"></a>
<FONT color="green">449</FONT>     *     &lt;tr&gt;&lt;th&gt;{@link #SUGGEST_COLUMN_ICON_2}&lt;/th&gt;<a name="line.449"></a>
<FONT color="green">450</FONT>     *         &lt;td&gt;If your cursor includes this column, then all suggestions will be provided in an<a name="line.450"></a>
<FONT color="green">451</FONT>     *             icons+text format.  This value should be a reference (resource ID) of the icon to<a name="line.451"></a>
<FONT color="green">452</FONT>     *             draw on the right side, or it can be null or zero to indicate no icon in this row.<a name="line.452"></a>
<FONT color="green">453</FONT>     *             You must provide both cursor columns, or neither.<a name="line.453"></a>
<FONT color="green">454</FONT>     *             &lt;/td&gt;<a name="line.454"></a>
<FONT color="green">455</FONT>     *         &lt;td align="center"&gt;No, but required if you also have {@link #SUGGEST_COLUMN_ICON_1}&lt;/td&gt;<a name="line.455"></a>
<FONT color="green">456</FONT>     *     &lt;/tr&gt;<a name="line.456"></a>
<FONT color="green">457</FONT>     *     <a name="line.457"></a>
<FONT color="green">458</FONT>     *     &lt;tr&gt;&lt;th&gt;{@link #SUGGEST_COLUMN_INTENT_ACTION}&lt;/th&gt;<a name="line.458"></a>
<FONT color="green">459</FONT>     *         &lt;td&gt;If this column exists &lt;i&gt;and&lt;/i&gt; this element exists at the given row, this is the <a name="line.459"></a>
<FONT color="green">460</FONT>     *             action that will be used when forming the suggestion's intent.  If the element is <a name="line.460"></a>
<FONT color="green">461</FONT>     *             not provided, the action will be taken from the android:searchSuggestIntentAction <a name="line.461"></a>
<FONT color="green">462</FONT>     *             field in your XML metadata.  &lt;i&gt;At least one of these must be present for the <a name="line.462"></a>
<FONT color="green">463</FONT>     *             suggestion to generate an intent.&lt;/i&gt;  Note:  If your action is the same for all <a name="line.463"></a>
<FONT color="green">464</FONT>     *             suggestions, it is more efficient to specify it using XML metadata and omit it from <a name="line.464"></a>
<FONT color="green">465</FONT>     *             the cursor.&lt;/td&gt;<a name="line.465"></a>
<FONT color="green">466</FONT>     *         &lt;td align="center"&gt;No&lt;/td&gt;<a name="line.466"></a>
<FONT color="green">467</FONT>     *     &lt;/tr&gt;<a name="line.467"></a>
<FONT color="green">468</FONT>     *     <a name="line.468"></a>
<FONT color="green">469</FONT>     *     &lt;tr&gt;&lt;th&gt;{@link #SUGGEST_COLUMN_INTENT_DATA}&lt;/th&gt;<a name="line.469"></a>
<FONT color="green">470</FONT>     *         &lt;td&gt;If this column exists &lt;i&gt;and&lt;/i&gt; this element exists at the given row, this is the <a name="line.470"></a>
<FONT color="green">471</FONT>     *             data that will be used when forming the suggestion's intent.  If the element is not <a name="line.471"></a>
<FONT color="green">472</FONT>     *             provided, the data will be taken from the android:searchSuggestIntentData field in <a name="line.472"></a>
<FONT color="green">473</FONT>     *             your XML metadata.  If neither source is provided, the Intent's data field will be <a name="line.473"></a>
<FONT color="green">474</FONT>     *             null.  Note:  If your data is the same for all suggestions, or can be described <a name="line.474"></a>
<FONT color="green">475</FONT>     *             using a constant part and a specific ID, it is more efficient to specify it using <a name="line.475"></a>
<FONT color="green">476</FONT>     *             XML metadata and omit it from the cursor.&lt;/td&gt;<a name="line.476"></a>
<FONT color="green">477</FONT>     *         &lt;td align="center"&gt;No&lt;/td&gt;<a name="line.477"></a>
<FONT color="green">478</FONT>     *     &lt;/tr&gt;<a name="line.478"></a>
<FONT color="green">479</FONT>     *     <a name="line.479"></a>
<FONT color="green">480</FONT>     *     &lt;tr&gt;&lt;th&gt;{@link #SUGGEST_COLUMN_INTENT_DATA_ID}&lt;/th&gt;<a name="line.480"></a>
<FONT color="green">481</FONT>     *         &lt;td&gt;If this column exists &lt;i&gt;and&lt;/i&gt; this element exists at the given row, then "/" and <a name="line.481"></a>
<FONT color="green">482</FONT>     *             this value will be appended to the data field in the Intent.  This should only be <a name="line.482"></a>
<FONT color="green">483</FONT>     *             used if the data field has already been set to an appropriate base string.&lt;/td&gt;<a name="line.483"></a>
<FONT color="green">484</FONT>     *         &lt;td align="center"&gt;No&lt;/td&gt;<a name="line.484"></a>
<FONT color="green">485</FONT>     *     &lt;/tr&gt;<a name="line.485"></a>
<FONT color="green">486</FONT>     *     <a name="line.486"></a>
<FONT color="green">487</FONT>     *     &lt;tr&gt;&lt;th&gt;{@link #SUGGEST_COLUMN_QUERY}&lt;/th&gt;<a name="line.487"></a>
<FONT color="green">488</FONT>     *         &lt;td&gt;If this column exists &lt;i&gt;and&lt;/i&gt; this element exists at the given row, this is the <a name="line.488"></a>
<FONT color="green">489</FONT>     *             data that will be used when forming the suggestion's query.&lt;/td&gt;<a name="line.489"></a>
<FONT color="green">490</FONT>     *         &lt;td align="center"&gt;Required if suggestion's action is <a name="line.490"></a>
<FONT color="green">491</FONT>     *             {@link android.content.Intent#ACTION_SEARCH ACTION_SEARCH}, optional otherwise.&lt;/td&gt;<a name="line.491"></a>
<FONT color="green">492</FONT>     *     &lt;/tr&gt;<a name="line.492"></a>
<FONT color="green">493</FONT>     *     <a name="line.493"></a>
<FONT color="green">494</FONT>     *     &lt;tr&gt;&lt;th&gt;&lt;i&gt;Other Columns&lt;/i&gt;&lt;/th&gt;<a name="line.494"></a>
<FONT color="green">495</FONT>     *         &lt;td&gt;Finally, if you have defined any &lt;a href="#ActionKeys"&gt;Action Keys&lt;/a&gt; and you wish <a name="line.495"></a>
<FONT color="green">496</FONT>     *             for them to have suggestion-specific definitions, you'll need to define one <a name="line.496"></a>
<FONT color="green">497</FONT>     *             additional column per action key.  The action key will only trigger if the <a name="line.497"></a>
<FONT color="green">498</FONT>     *             currently-selection suggestion has a non-empty string in the corresponding column.  <a name="line.498"></a>
<FONT color="green">499</FONT>     *             See the section on &lt;a href="#ActionKeys"&gt;Action Keys&lt;/a&gt; for additional details and <a name="line.499"></a>
<FONT color="green">500</FONT>     *             implementation steps.&lt;/td&gt;<a name="line.500"></a>
<FONT color="green">501</FONT>     *         &lt;td align="center"&gt;No&lt;/td&gt;<a name="line.501"></a>
<FONT color="green">502</FONT>     *     &lt;/tr&gt;<a name="line.502"></a>
<FONT color="green">503</FONT>     *     <a name="line.503"></a>
<FONT color="green">504</FONT>     *     &lt;/tbody&gt;<a name="line.504"></a>
<FONT color="green">505</FONT>     * &lt;/table&gt;<a name="line.505"></a>
<FONT color="green">506</FONT>     *<a name="line.506"></a>
<FONT color="green">507</FONT>     * &lt;p&gt;Clearly there are quite a few permutations of your suggestion data, but in the next section<a name="line.507"></a>
<FONT color="green">508</FONT>     * we'll look at a few simple combinations that you'll select from. <a name="line.508"></a>
<FONT color="green">509</FONT>     *<a name="line.509"></a>
<FONT color="green">510</FONT>     * &lt;p&gt;&lt;b&gt;The Format Of Intents Sent By Search Suggestions.&lt;/b&gt;  Although there are many ways to <a name="line.510"></a>
<FONT color="green">511</FONT>     * configure these intents, this document will provide specific information on just a few of them.  <a name="line.511"></a>
<FONT color="green">512</FONT>     * &lt;ul&gt;&lt;li&gt;&lt;b&gt;Launch a query.&lt;/b&gt;  In this model, each suggestion represents a query that your<a name="line.512"></a>
<FONT color="green">513</FONT>     * searchable activity can perform, and the {@link android.content.Intent Intent} will be formatted<a name="line.513"></a>
<FONT color="green">514</FONT>     * exactly like those sent when the user enters query text and clicks the "GO" button:<a name="line.514"></a>
<FONT color="green">515</FONT>     *   &lt;ul&gt;<a name="line.515"></a>
<FONT color="green">516</FONT>     *   &lt;li&gt;&lt;b&gt;Action:&lt;/b&gt; {@link android.content.Intent#ACTION_SEARCH ACTION_SEARCH} provided<a name="line.516"></a>
<FONT color="green">517</FONT>     *   using your XML metadata (android:searchSuggestIntentAction).&lt;/li&gt;<a name="line.517"></a>
<FONT color="green">518</FONT>     *   &lt;li&gt;&lt;b&gt;Data:&lt;/b&gt; empty (not used).&lt;/li&gt;<a name="line.518"></a>
<FONT color="green">519</FONT>     *   &lt;li&gt;&lt;b&gt;Query:&lt;/b&gt; query text supplied by the cursor.&lt;/li&gt;<a name="line.519"></a>
<FONT color="green">520</FONT>     *   &lt;/ul&gt;<a name="line.520"></a>
<FONT color="green">521</FONT>     * &lt;/li&gt;<a name="line.521"></a>
<FONT color="green">522</FONT>     * &lt;li&gt;&lt;b&gt;Go directly to a result, using a complete Data Uri.&lt;/b&gt;  In this model, the user will be <a name="line.522"></a>
<FONT color="green">523</FONT>     * taken directly to a specific result.<a name="line.523"></a>
<FONT color="green">524</FONT>     *   &lt;ul&gt;<a name="line.524"></a>
<FONT color="green">525</FONT>     *   &lt;li&gt;&lt;b&gt;Action:&lt;/b&gt; {@link android.content.Intent#ACTION_VIEW ACTION_VIEW}&lt;/li&gt;<a name="line.525"></a>
<FONT color="green">526</FONT>     *   &lt;li&gt;&lt;b&gt;Data:&lt;/b&gt; a complete Uri, supplied by the cursor, that identifies the desired data.&lt;/li&gt;<a name="line.526"></a>
<FONT color="green">527</FONT>     *   &lt;li&gt;&lt;b&gt;Query:&lt;/b&gt; query text supplied with the suggestion (probably ignored)&lt;/li&gt;<a name="line.527"></a>
<FONT color="green">528</FONT>     *   &lt;/ul&gt;<a name="line.528"></a>
<FONT color="green">529</FONT>     * &lt;/li&gt;<a name="line.529"></a>
<FONT color="green">530</FONT>     * &lt;li&gt;&lt;b&gt;Go directly to a result, using a synthesized Data Uri.&lt;/b&gt;  This has the same result<a name="line.530"></a>
<FONT color="green">531</FONT>     * as the previous suggestion, but provides the Data Uri in a different way.<a name="line.531"></a>
<FONT color="green">532</FONT>     *   &lt;ul&gt;<a name="line.532"></a>
<FONT color="green">533</FONT>     *   &lt;li&gt;&lt;b&gt;Action:&lt;/b&gt; {@link android.content.Intent#ACTION_VIEW ACTION_VIEW}&lt;/li&gt;<a name="line.533"></a>
<FONT color="green">534</FONT>     *   &lt;li&gt;&lt;b&gt;Data:&lt;/b&gt; The search manager will assemble a Data Uri using the following elements:  <a name="line.534"></a>
<FONT color="green">535</FONT>     *   a Uri fragment provided in your XML metadata (android:searchSuggestIntentData), followed by <a name="line.535"></a>
<FONT color="green">536</FONT>     *   a single "/", followed by the value found in the {@link #SUGGEST_COLUMN_INTENT_DATA_ID} <a name="line.536"></a>
<FONT color="green">537</FONT>     *   entry in your cursor.&lt;/li&gt;<a name="line.537"></a>
<FONT color="green">538</FONT>     *   &lt;li&gt;&lt;b&gt;Query:&lt;/b&gt; query text supplied with the suggestion (probably ignored)&lt;/li&gt;<a name="line.538"></a>
<FONT color="green">539</FONT>     *   &lt;/ul&gt;<a name="line.539"></a>
<FONT color="green">540</FONT>     * &lt;/li&gt;<a name="line.540"></a>
<FONT color="green">541</FONT>     * &lt;/ul&gt;<a name="line.541"></a>
<FONT color="green">542</FONT>     * &lt;p&gt;This list is not meant to be exhaustive.  Applications should feel free to define other types<a name="line.542"></a>
<FONT color="green">543</FONT>     * of suggestions.  For example, you could reduce long lists of results to summaries, and use one<a name="line.543"></a>
<FONT color="green">544</FONT>     * of the above intents (or one of your own) with specially formatted Data Uri's to display more<a name="line.544"></a>
<FONT color="green">545</FONT>     * detailed results.  Or you could display textual shortcuts as suggestions, but launch a display<a name="line.545"></a>
<FONT color="green">546</FONT>     * in a more data-appropriate format such as media artwork.<a name="line.546"></a>
<FONT color="green">547</FONT>     * <a name="line.547"></a>
<FONT color="green">548</FONT>     * &lt;p&gt;&lt;b&gt;Suggestion Rewriting.&lt;/b&gt;  If the user navigates through the suggestions list, the UI<a name="line.548"></a>
<FONT color="green">549</FONT>     * may temporarily rewrite the user's query with a query that matches the currently selected <a name="line.549"></a>
<FONT color="green">550</FONT>     * suggestion.  This enables the user to see what query is being suggested, and also allows the user<a name="line.550"></a>
<FONT color="green">551</FONT>     * to click or touch in the entry EditText element and make further edits to the query before<a name="line.551"></a>
<FONT color="green">552</FONT>     * dispatching it.  In order to perform this correctly, the Search UI needs to know exactly what<a name="line.552"></a>
<FONT color="green">553</FONT>     * text to rewrite the query with.<a name="line.553"></a>
<FONT color="green">554</FONT>     * <a name="line.554"></a>
<FONT color="green">555</FONT>     * &lt;p&gt;For each suggestion, the following logic is used to select a new query string:<a name="line.555"></a>
<FONT color="green">556</FONT>     * &lt;ul&gt;&lt;li&gt;If the suggestion provides an explicit value in the {@link #SUGGEST_COLUMN_QUERY} <a name="line.556"></a>
<FONT color="green">557</FONT>     * column, this value will be used.&lt;/li&gt;<a name="line.557"></a>
<FONT color="green">558</FONT>     * &lt;li&gt;If the metadata includes the queryRewriteFromData flag, and the suggestion provides an <a name="line.558"></a>
<FONT color="green">559</FONT>     * explicit value for the intent Data field, this Uri will be used.  Note that this should only be<a name="line.559"></a>
<FONT color="green">560</FONT>     * used with Uri's that are intended to be user-visible, such as HTTP.  Internal Uri schemes should<a name="line.560"></a>
<FONT color="green">561</FONT>     * not be used in this way.&lt;/li&gt;<a name="line.561"></a>
<FONT color="green">562</FONT>     * &lt;li&gt;If the metadata includes the queryRewriteFromText flag, the text in <a name="line.562"></a>
<FONT color="green">563</FONT>     * {@link #SUGGEST_COLUMN_TEXT_1} will be used.  This should be used for suggestions in which no<a name="line.563"></a>
<FONT color="green">564</FONT>     * query text is provided and the SUGGEST_COLUMN_INTENT_DATA values are not suitable for user <a name="line.564"></a>
<FONT color="green">565</FONT>     * inspection and editing.&lt;/li&gt;&lt;/ul&gt;<a name="line.565"></a>
<FONT color="green">566</FONT>     *<a name="line.566"></a>
<FONT color="green">567</FONT>     * &lt;a name="ActionKeys"&gt;&lt;/a&gt;<a name="line.567"></a>
<FONT color="green">568</FONT>     * &lt;h3&gt;Action Keys&lt;/h3&gt;<a name="line.568"></a>
<FONT color="green">569</FONT>     * <a name="line.569"></a>
<FONT color="green">570</FONT>     * &lt;p&gt;Searchable activities may also wish to provide shortcuts based on the various action keys<a name="line.570"></a>
<FONT color="green">571</FONT>     * available on the device.  The most basic example of this is the contacts app, which enables the<a name="line.571"></a>
<FONT color="green">572</FONT>     * green "dial" key for quick access during searching.  Not all action keys are available on <a name="line.572"></a>
<FONT color="green">573</FONT>     * every device, and not all are allowed to be overriden in this way.  (For example, the "Home"<a name="line.573"></a>
<FONT color="green">574</FONT>     * key must always return to the home screen, with no exceptions.)<a name="line.574"></a>
<FONT color="green">575</FONT>     * <a name="line.575"></a>
<FONT color="green">576</FONT>     * &lt;p&gt;In order to define action keys for your searchable application, you must do two things.<a name="line.576"></a>
<FONT color="green">577</FONT>     * <a name="line.577"></a>
<FONT color="green">578</FONT>     * &lt;ul&gt;<a name="line.578"></a>
<FONT color="green">579</FONT>     * &lt;li&gt;You'll add one or more &lt;i&gt;actionkey&lt;/i&gt; elements to your searchable metadata configuration<a name="line.579"></a>
<FONT color="green">580</FONT>     * file.  Each element defines one of the keycodes you are interested in, <a name="line.580"></a>
<FONT color="green">581</FONT>     * defines the conditions under which they are sent, and provides details<a name="line.581"></a>
<FONT color="green">582</FONT>     * on how to communicate the action key event back to your searchable activity.&lt;/li&gt;<a name="line.582"></a>
<FONT color="green">583</FONT>     * &lt;li&gt;In your broadcast receiver, if you wish, you can check for action keys by checking the <a name="line.583"></a>
<FONT color="green">584</FONT>     * extras field of the {@link android.content.Intent Intent}.&lt;/li&gt;<a name="line.584"></a>
<FONT color="green">585</FONT>     * &lt;/ul&gt;<a name="line.585"></a>
<FONT color="green">586</FONT>     * <a name="line.586"></a>
<FONT color="green">587</FONT>     * &lt;p&gt;&lt;b&gt;Updating metadata.&lt;/b&gt;  For each keycode of interest, you must add an &amp;lt;actionkey&amp;gt;<a name="line.587"></a>
<FONT color="green">588</FONT>     * element.  Within this element you must define two or three attributes.  The first attribute,<a name="line.588"></a>
<FONT color="green">589</FONT>     * &amp;lt;android:keycode&amp;gt;, is required;  It is the key code of the action key event, as defined in <a name="line.589"></a>
<FONT color="green">590</FONT>     * {@link android.view.KeyEvent}.  The remaining two attributes define the value of the actionkey's<a name="line.590"></a>
<FONT color="green">591</FONT>     * &lt;i&gt;message&lt;/i&gt;, which will be passed to your searchable activity in the <a name="line.591"></a>
<FONT color="green">592</FONT>     * {@link android.content.Intent Intent} (see below for more details).  Although each of these <a name="line.592"></a>
<FONT color="green">593</FONT>     * attributes is optional, you must define one or both for the action key to have any effect.<a name="line.593"></a>
<FONT color="green">594</FONT>     * &amp;lt;android:queryActionMsg&amp;gt; provides the message that will be sent if the action key is <a name="line.594"></a>
<FONT color="green">595</FONT>     * pressed while the user is simply entering query text.  &amp;lt;android:suggestActionMsgColumn&amp;gt;<a name="line.595"></a>
<FONT color="green">596</FONT>     * is used when action keys are tied to specific suggestions.  This attribute provides the name<a name="line.596"></a>
<FONT color="green">597</FONT>     * of a &lt;i&gt;column&lt;/i&gt; in your suggestion cursor;  The individual suggestion, in that column,<a name="line.597"></a>
<FONT color="green">598</FONT>     * provides the message.  (If the cell is empty or null, that suggestion will not work with that<a name="line.598"></a>
<FONT color="green">599</FONT>     * action key.)<a name="line.599"></a>
<FONT color="green">600</FONT>     * &lt;p&gt;See the &lt;a href="#SearchabilityMetadata"&gt;Searchability Metadata&lt;/a&gt; section for more details <a name="line.600"></a>
<FONT color="green">601</FONT>     * and examples.<a name="line.601"></a>
<FONT color="green">602</FONT>     * <a name="line.602"></a>
<FONT color="green">603</FONT>     * &lt;p&gt;&lt;b&gt;Receiving Action Keys&lt;/b&gt;  Intents launched by action keys will be specially marked<a name="line.603"></a>
<FONT color="green">604</FONT>     * using a combination of values.  This enables your searchable application to examine the intent,<a name="line.604"></a>
<FONT color="green">605</FONT>     * if necessary, and perform special processing.  For example, clicking a suggested contact might<a name="line.605"></a>
<FONT color="green">606</FONT>     * simply display them;  Selecting a suggested contact and clicking the dial button might<a name="line.606"></a>
<FONT color="green">607</FONT>     * immediately call them.<a name="line.607"></a>
<FONT color="green">608</FONT>     * <a name="line.608"></a>
<FONT color="green">609</FONT>     * &lt;p&gt;When a search {@link android.content.Intent Intent} is launched by an action key, two values<a name="line.609"></a>
<FONT color="green">610</FONT>     * will be added to the extras field.<a name="line.610"></a>
<FONT color="green">611</FONT>     * &lt;ul&gt;<a name="line.611"></a>
<FONT color="green">612</FONT>     * &lt;li&gt;To examine the key code, use {@link android.content.Intent#getIntExtra <a name="line.612"></a>
<FONT color="green">613</FONT>     * getIntExtra(SearchManager.ACTION_KEY)}.&lt;/li&gt;<a name="line.613"></a>
<FONT color="green">614</FONT>     * &lt;li&gt;To examine the message string, use {@link android.content.Intent#getStringExtra <a name="line.614"></a>
<FONT color="green">615</FONT>     * getStringExtra(SearchManager.ACTION_MSG)}&lt;/li&gt;<a name="line.615"></a>
<FONT color="green">616</FONT>     * &lt;/ul&gt;<a name="line.616"></a>
<FONT color="green">617</FONT>     * <a name="line.617"></a>
<FONT color="green">618</FONT>     * &lt;a name="SearchabilityMetadata"&gt;&lt;/a&gt;<a name="line.618"></a>
<FONT color="green">619</FONT>     * &lt;h3&gt;Searchability Metadata&lt;/h3&gt;<a name="line.619"></a>
<FONT color="green">620</FONT>     * <a name="line.620"></a>
<FONT color="green">621</FONT>     * &lt;p&gt;Every activity that is searchable must provide a small amount of additional information<a name="line.621"></a>
<FONT color="green">622</FONT>     * in order to properly configure the search system.  This controls the way that your search<a name="line.622"></a>
<FONT color="green">623</FONT>     * is presented to the user, and controls for the various modalities described previously.<a name="line.623"></a>
<FONT color="green">624</FONT>     * <a name="line.624"></a>
<FONT color="green">625</FONT>     * &lt;p&gt;If your application is not searchable,<a name="line.625"></a>
<FONT color="green">626</FONT>     * then you do not need to provide any search metadata, and you can skip the rest of this section.<a name="line.626"></a>
<FONT color="green">627</FONT>     * When this search metadata cannot be found, the search manager will assume that the activity <a name="line.627"></a>
<FONT color="green">628</FONT>     * does not implement search.  (Note: to implement web-based search, you will need to add<a name="line.628"></a>
<FONT color="green">629</FONT>     * the android.app.default_searchable metadata to your manifest, as shown below.)<a name="line.629"></a>
<FONT color="green">630</FONT>     * <a name="line.630"></a>
<FONT color="green">631</FONT>     * &lt;p&gt;Values you supply in metadata apply only to each local searchable activity.  Each<a name="line.631"></a>
<FONT color="green">632</FONT>     * searchable activity can define a completely unique search experience relevant to its own<a name="line.632"></a>
<FONT color="green">633</FONT>     * capabilities and user experience requirements, and a single application can even define multiple<a name="line.633"></a>
<FONT color="green">634</FONT>     * searchable activities.<a name="line.634"></a>
<FONT color="green">635</FONT>     *<a name="line.635"></a>
<FONT color="green">636</FONT>     * &lt;p&gt;&lt;b&gt;Metadata for searchable activity.&lt;/b&gt;  As with your search implementations described <a name="line.636"></a>
<FONT color="green">637</FONT>     * above, you must first identify which of your activities is searchable.  In the <a name="line.637"></a>
<FONT color="green">638</FONT>     * &lt;a href="{@docRoot}guide/topics/manifest/manifest-intro.html"&gt;manifest&lt;/a&gt; entry for this activity, you must <a name="line.638"></a>
<FONT color="green">639</FONT>     * provide two elements:<a name="line.639"></a>
<FONT color="green">640</FONT>     * &lt;ul&gt;&lt;li&gt;An intent-filter specifying that you can receive and process the <a name="line.640"></a>
<FONT color="green">641</FONT>     * {@link android.content.Intent#ACTION_SEARCH ACTION_SEARCH} {@link android.content.Intent Intent}.<a name="line.641"></a>
<FONT color="green">642</FONT>     * &lt;/li&gt;<a name="line.642"></a>
<FONT color="green">643</FONT>     * &lt;li&gt;A reference to a small XML file (typically called "searchable.xml") which contains the<a name="line.643"></a>
<FONT color="green">644</FONT>     * remaining configuration information for how your application implements search.&lt;/li&gt;&lt;/ul&gt;<a name="line.644"></a>
<FONT color="green">645</FONT>     * <a name="line.645"></a>
<FONT color="green">646</FONT>     * &lt;p&gt;Here is a snippet showing the necessary elements in the <a name="line.646"></a>
<FONT color="green">647</FONT>     * &lt;a href="{@docRoot}guide/topics/manifest/manifest-intro.html"&gt;manifest&lt;/a&gt; entry for your searchable activity.<a name="line.647"></a>
<FONT color="green">648</FONT>     * &lt;pre class="prettyprint"&gt;<a name="line.648"></a>
<FONT color="green">649</FONT>     *        &amp;lt;!-- Search Activity - searchable --&amp;gt;<a name="line.649"></a>
<FONT color="green">650</FONT>     *        &amp;lt;activity android:name="MySearchActivity" <a name="line.650"></a>
<FONT color="green">651</FONT>     *                  android:label="Search"<a name="line.651"></a>
<FONT color="green">652</FONT>     *                  android:launchMode="singleTop"&amp;gt;<a name="line.652"></a>
<FONT color="green">653</FONT>     *            &amp;lt;intent-filter&amp;gt;<a name="line.653"></a>
<FONT color="green">654</FONT>     *                &amp;lt;action android:name="android.intent.action.SEARCH" /&amp;gt;<a name="line.654"></a>
<FONT color="green">655</FONT>     *                &amp;lt;category android:name="android.intent.category.DEFAULT" /&amp;gt;<a name="line.655"></a>
<FONT color="green">656</FONT>     *            &amp;lt;/intent-filter&amp;gt;<a name="line.656"></a>
<FONT color="green">657</FONT>     *            &amp;lt;meta-data android:name="android.app.searchable" <a name="line.657"></a>
<FONT color="green">658</FONT>     *                       android:resource="@xml/searchable" /&amp;gt;<a name="line.658"></a>
<FONT color="green">659</FONT>     *        &amp;lt;/activity&amp;gt;&lt;/pre&gt;<a name="line.659"></a>
<FONT color="green">660</FONT>     *<a name="line.660"></a>
<FONT color="green">661</FONT>     * &lt;p&gt;Next, you must provide the rest of the searchability configuration in <a name="line.661"></a>
<FONT color="green">662</FONT>     * the small XML file, stored in the ../xml/ folder in your build.  The XML file is a <a name="line.662"></a>
<FONT color="green">663</FONT>     * simple enumeration of the search configuration parameters for searching within this activity,<a name="line.663"></a>
<FONT color="green">664</FONT>     * application, or package.  Here is a sample XML file (named searchable.xml, for use with<a name="line.664"></a>
<FONT color="green">665</FONT>     * the above manifest) for a query-search activity.<a name="line.665"></a>
<FONT color="green">666</FONT>     *<a name="line.666"></a>
<FONT color="green">667</FONT>     * &lt;pre class="prettyprint"&gt;<a name="line.667"></a>
<FONT color="green">668</FONT>     * &amp;lt;searchable xmlns:android="http://schemas.android.com/apk/res/android"<a name="line.668"></a>
<FONT color="green">669</FONT>     *     android:label="@string/search_label"<a name="line.669"></a>
<FONT color="green">670</FONT>     *     android:hint="@string/search_hint" &amp;gt;<a name="line.670"></a>
<FONT color="green">671</FONT>     * &amp;lt;/searchable&amp;gt;&lt;/pre&gt;<a name="line.671"></a>
<FONT color="green">672</FONT>     *<a name="line.672"></a>
<FONT color="green">673</FONT>     * &lt;p&gt;Note that all user-visible strings &lt;i&gt;must&lt;/i&gt; be provided in the form of "@string" <a name="line.673"></a>
<FONT color="green">674</FONT>     * references.  Hard-coded strings, which cannot be localized, will not work properly in search<a name="line.674"></a>
<FONT color="green">675</FONT>     * metadata.<a name="line.675"></a>
<FONT color="green">676</FONT>     * <a name="line.676"></a>
<FONT color="green">677</FONT>     * &lt;p&gt;Attributes you can set in search metadata:<a name="line.677"></a>
<FONT color="green">678</FONT>     * &lt;table border="2" width="85%" align="center" frame="hsides" rules="rows"&gt;<a name="line.678"></a>
<FONT color="green">679</FONT>     *<a name="line.679"></a>
<FONT color="green">680</FONT>     *     &lt;thead&gt;<a name="line.680"></a>
<FONT color="green">681</FONT>     *     &lt;tr&gt;&lt;th&gt;Attribute&lt;/th&gt; &lt;th&gt;Description&lt;/th&gt; &lt;th&gt;Required?&lt;/th&gt;&lt;/tr&gt;<a name="line.681"></a>
<FONT color="green">682</FONT>     *     &lt;/thead&gt;<a name="line.682"></a>
<FONT color="green">683</FONT>     *<a name="line.683"></a>
<FONT color="green">684</FONT>     *     &lt;tbody&gt;<a name="line.684"></a>
<FONT color="green">685</FONT>     *     &lt;tr&gt;&lt;th&gt;android:label&lt;/th&gt;<a name="line.685"></a>
<FONT color="green">686</FONT>     *         &lt;td&gt;This is the name for your application that will be presented to the user in a <a name="line.686"></a>
<FONT color="green">687</FONT>     *             list of search targets, or in the search box as a label.&lt;/td&gt;<a name="line.687"></a>
<FONT color="green">688</FONT>     *         &lt;td align="center"&gt;Yes&lt;/td&gt;<a name="line.688"></a>
<FONT color="green">689</FONT>     *     &lt;/tr&gt;<a name="line.689"></a>
<FONT color="green">690</FONT>     *     <a name="line.690"></a>
<FONT color="green">691</FONT>     *     &lt;tr&gt;&lt;th&gt;android:icon&lt;/th&gt;<a name="line.691"></a>
<FONT color="green">692</FONT>     *         &lt;td&gt;If provided, this icon will be used &lt;i&gt;in place&lt;/i&gt; of the label string.  This<a name="line.692"></a>
<FONT color="green">693</FONT>     *         is provided in order to present logos or other non-textual banners.&lt;/td&gt;<a name="line.693"></a>
<FONT color="green">694</FONT>     *         &lt;td align="center"&gt;No&lt;/td&gt;<a name="line.694"></a>
<FONT color="green">695</FONT>     *     &lt;/tr&gt;<a name="line.695"></a>
<FONT color="green">696</FONT>     *     <a name="line.696"></a>
<FONT color="green">697</FONT>     *     &lt;tr&gt;&lt;th&gt;android:hint&lt;/th&gt;<a name="line.697"></a>
<FONT color="green">698</FONT>     *         &lt;td&gt;This is the text to display in the search text field when no user text has been <a name="line.698"></a>
<FONT color="green">699</FONT>     *             entered.&lt;/td&gt;<a name="line.699"></a>
<FONT color="green">700</FONT>     *         &lt;td align="center"&gt;No&lt;/td&gt;<a name="line.700"></a>
<FONT color="green">701</FONT>     *     &lt;/tr&gt;<a name="line.701"></a>
<FONT color="green">702</FONT>     *     <a name="line.702"></a>
<FONT color="green">703</FONT>     *     &lt;tr&gt;&lt;th&gt;android:searchButtonText&lt;/th&gt;<a name="line.703"></a>
<FONT color="green">704</FONT>     *         &lt;td&gt;If provided, this text will replace the default text in the "Search" button.&lt;/td&gt;<a name="line.704"></a>
<FONT color="green">705</FONT>     *         &lt;td align="center"&gt;No&lt;/td&gt;<a name="line.705"></a>
<FONT color="green">706</FONT>     *     &lt;/tr&gt;<a name="line.706"></a>
<FONT color="green">707</FONT>     *     <a name="line.707"></a>
<FONT color="green">708</FONT>     *     &lt;tr&gt;&lt;th&gt;android:searchMode&lt;/th&gt;<a name="line.708"></a>
<FONT color="green">709</FONT>     *         &lt;td&gt;If provided and non-zero, sets additional modes for control of the search <a name="line.709"></a>
<FONT color="green">710</FONT>     *             presentation.  The following mode bits are defined:<a name="line.710"></a>
<FONT color="green">711</FONT>     *             &lt;table border="2" align="center" frame="hsides" rules="rows"&gt;<a name="line.711"></a>
<FONT color="green">712</FONT>     *                 &lt;tbody&gt;<a name="line.712"></a>
<FONT color="green">713</FONT>     *                 &lt;tr&gt;&lt;th&gt;showSearchLabelAsBadge&lt;/th&gt;<a name="line.713"></a>
<FONT color="green">714</FONT>     *                     &lt;td&gt;If set, this flag enables the display of the search target (label) <a name="line.714"></a>
<FONT color="green">715</FONT>     *                         within the search bar.  If this flag and showSearchIconAsBadge<a name="line.715"></a>
<FONT color="green">716</FONT>     *                         (see below) are both not set, no badge will be shown.&lt;/td&gt;<a name="line.716"></a>
<FONT color="green">717</FONT>     *                 &lt;/tr&gt;<a name="line.717"></a>
<FONT color="green">718</FONT>     *                 &lt;tr&gt;&lt;th&gt;showSearchIconAsBadge&lt;/th&gt;<a name="line.718"></a>
<FONT color="green">719</FONT>     *                     &lt;td&gt;If set, this flag enables the display of the search target (icon) within<a name="line.719"></a>
<FONT color="green">720</FONT>     *                         the search bar.  If this flag and showSearchLabelAsBadge<a name="line.720"></a>
<FONT color="green">721</FONT>     *                         (see above) are both not set, no badge will be shown.  If both flags<a name="line.721"></a>
<FONT color="green">722</FONT>     *                         are set, showSearchIconAsBadge has precedence and the icon will be<a name="line.722"></a>
<FONT color="green">723</FONT>     *                         shown.&lt;/td&gt;<a name="line.723"></a>
<FONT color="green">724</FONT>     *                 &lt;/tr&gt;<a name="line.724"></a>
<FONT color="green">725</FONT>     *                 &lt;tr&gt;&lt;th&gt;queryRewriteFromData&lt;/th&gt;<a name="line.725"></a>
<FONT color="green">726</FONT>     *                     &lt;td&gt;If set, this flag causes the suggestion column SUGGEST_COLUMN_INTENT_DATA<a name="line.726"></a>
<FONT color="green">727</FONT>     *                         to be considered as the text for suggestion query rewriting.  This should<a name="line.727"></a>
<FONT color="green">728</FONT>     *                         only be used when the values in SUGGEST_COLUMN_INTENT_DATA are suitable<a name="line.728"></a>
<FONT color="green">729</FONT>     *                         for user inspection and editing - typically, HTTP/HTTPS Uri's.&lt;/td&gt;<a name="line.729"></a>
<FONT color="green">730</FONT>     *                 &lt;/tr&gt;<a name="line.730"></a>
<FONT color="green">731</FONT>     *                 &lt;tr&gt;&lt;th&gt;queryRewriteFromText&lt;/th&gt;<a name="line.731"></a>
<FONT color="green">732</FONT>     *                     &lt;td&gt;If set, this flag causes the suggestion column SUGGEST_COLUMN_TEXT_1 to <a name="line.732"></a>
<FONT color="green">733</FONT>     *                         be considered as the text for suggestion query rewriting.  This should <a name="line.733"></a>
<FONT color="green">734</FONT>     *                         be used for suggestions in which no query text is provided and the <a name="line.734"></a>
<FONT color="green">735</FONT>     *                         SUGGEST_COLUMN_INTENT_DATA values are not suitable for user inspection <a name="line.735"></a>
<FONT color="green">736</FONT>     *                         and editing.&lt;/td&gt;<a name="line.736"></a>
<FONT color="green">737</FONT>     *                 &lt;/tr&gt;<a name="line.737"></a>
<FONT color="green">738</FONT>     *                 &lt;/tbody&gt;<a name="line.738"></a>
<FONT color="green">739</FONT>     *            &lt;/table&gt;&lt;/td&gt;<a name="line.739"></a>
<FONT color="green">740</FONT>     *         &lt;td align="center"&gt;No&lt;/td&gt;<a name="line.740"></a>
<FONT color="green">741</FONT>     *     &lt;/tr&gt;<a name="line.741"></a>
<FONT color="green">742</FONT>     *     <a name="line.742"></a>
<FONT color="green">743</FONT>     *     &lt;tr&gt;&lt;th&gt;android:inputType&lt;/th&gt;<a name="line.743"></a>
<FONT color="green">744</FONT>     *         &lt;td&gt;If provided, supplies a hint about the type of search text the user will be<a name="line.744"></a>
<FONT color="green">745</FONT>     *             entering.  For most searches, in which free form text is expected, this attribute<a name="line.745"></a>
<FONT color="green">746</FONT>     *             need not be provided.  Suitable values for this attribute are described in the<a name="line.746"></a>
<FONT color="green">747</FONT>     *             &lt;a href="../R.attr.html#inputType"&gt;inputType&lt;/a&gt; attribute.&lt;/td&gt;<a name="line.747"></a>
<FONT color="green">748</FONT>     *         &lt;td align="center"&gt;No&lt;/td&gt;<a name="line.748"></a>
<FONT color="green">749</FONT>     *     &lt;/tr&gt;<a name="line.749"></a>
<FONT color="green">750</FONT>     *     &lt;tr&gt;&lt;th&gt;android:imeOptions&lt;/th&gt;<a name="line.750"></a>
<FONT color="green">751</FONT>     *         &lt;td&gt;If provided, supplies additional options for the input method.<a name="line.751"></a>
<FONT color="green">752</FONT>     *             For most searches, in which free form text is expected, this attribute<a name="line.752"></a>
<FONT color="green">753</FONT>     *             need not be provided, and will default to "actionSearch".<a name="line.753"></a>
<FONT color="green">754</FONT>     *             Suitable values for this attribute are described in the<a name="line.754"></a>
<FONT color="green">755</FONT>     *             &lt;a href="../R.attr.html#imeOptions"&gt;imeOptions&lt;/a&gt; attribute.&lt;/td&gt;<a name="line.755"></a>
<FONT color="green">756</FONT>     *         &lt;td align="center"&gt;No&lt;/td&gt;<a name="line.756"></a>
<FONT color="green">757</FONT>     *     &lt;/tr&gt;<a name="line.757"></a>
<FONT color="green">758</FONT>     *     <a name="line.758"></a>
<FONT color="green">759</FONT>     *     &lt;/tbody&gt;<a name="line.759"></a>
<FONT color="green">760</FONT>     * &lt;/table&gt;<a name="line.760"></a>
<FONT color="green">761</FONT>     * <a name="line.761"></a>
<FONT color="green">762</FONT>     * &lt;p&gt;&lt;b&gt;Styleable Resources in your Metadata.&lt;/b&gt;  It's possible to provide alternate strings<a name="line.762"></a>
<FONT color="green">763</FONT>     * for your searchable application, in order to provide localization and/or to better visual <a name="line.763"></a>
<FONT color="green">764</FONT>     * presentation on different device configurations.  Each searchable activity has a single XML <a name="line.764"></a>
<FONT color="green">765</FONT>     * metadata file, but any resource references can be replaced at runtime based on device<a name="line.765"></a>
<FONT color="green">766</FONT>     * configuration, language setting, and other system inputs.<a name="line.766"></a>
<FONT color="green">767</FONT>     * <a name="line.767"></a>
<FONT color="green">768</FONT>     * &lt;p&gt;A concrete example is the "hint" text you supply using the android:searchHint attribute.<a name="line.768"></a>
<FONT color="green">769</FONT>     * In portrait mode you'll have less screen space and may need to provide a shorter string, but<a name="line.769"></a>
<FONT color="green">770</FONT>     * in landscape mode you can provide a longer, more descriptive hint.  To do this, you'll need to<a name="line.770"></a>
<FONT color="green">771</FONT>     * define two or more strings.xml files, in the following directories:<a name="line.771"></a>
<FONT color="green">772</FONT>     * &lt;ul&gt;&lt;li&gt;.../res/values-land/strings.xml&lt;/li&gt;<a name="line.772"></a>
<FONT color="green">773</FONT>     * &lt;li&gt;.../res/values-port/strings.xml&lt;/li&gt;<a name="line.773"></a>
<FONT color="green">774</FONT>     * &lt;li&gt;.../res/values/strings.xml&lt;/li&gt;&lt;/ul&gt;<a name="line.774"></a>
<FONT color="green">775</FONT>     * <a name="line.775"></a>
<FONT color="green">776</FONT>     * &lt;p&gt;For more complete documentation on this capability, see<a name="line.776"></a>
<FONT color="green">777</FONT>     * &lt;a href="{@docRoot}guide/topics/resources/resources-i18n.html#AlternateResources"&gt;Resources and <a name="line.777"></a>
<FONT color="green">778</FONT>     * Internationalization: Alternate Resources&lt;/a&gt;.<a name="line.778"></a>
<FONT color="green">779</FONT>     *<a name="line.779"></a>
<FONT color="green">780</FONT>     * &lt;p&gt;&lt;b&gt;Metadata for non-searchable activities.&lt;/b&gt;  Activities which are part of a searchable<a name="line.780"></a>
<FONT color="green">781</FONT>     * application, but don't implement search itself, require a bit of "glue" in order to cause<a name="line.781"></a>
<FONT color="green">782</FONT>     * them to invoke search using your searchable activity as their primary context.  If this is not<a name="line.782"></a>
<FONT color="green">783</FONT>     * provided, then searches from these activities will use the system default search context.<a name="line.783"></a>
<FONT color="green">784</FONT>     * <a name="line.784"></a>
<FONT color="green">785</FONT>     * &lt;p&gt;The simplest way to specify this is to add a &lt;i&gt;search reference&lt;/i&gt; element to the<a name="line.785"></a>
<FONT color="green">786</FONT>     * application entry in the &lt;a href="{@docRoot}guide/topics/manifest/manifest-intro.html"&gt;manifest&lt;/a&gt; file.  <a name="line.786"></a>
<FONT color="green">787</FONT>     * The value of this reference can be either of:<a name="line.787"></a>
<FONT color="green">788</FONT>     * &lt;ul&gt;&lt;li&gt;The name of your searchable activity.  <a name="line.788"></a>
<FONT color="green">789</FONT>     * It is typically prefixed by '.' to indicate that it's in the same package.&lt;/li&gt;<a name="line.789"></a>
<FONT color="green">790</FONT>     * &lt;li&gt;A "*" indicates that the system may select a default searchable activity, in which<a name="line.790"></a>
<FONT color="green">791</FONT>     * case it will typically select web-based search.&lt;/li&gt;<a name="line.791"></a>
<FONT color="green">792</FONT>     * &lt;/ul&gt;<a name="line.792"></a>
<FONT color="green">793</FONT>     *<a name="line.793"></a>
<FONT color="green">794</FONT>     * &lt;p&gt;Here is a snippet showing the necessary addition to the manifest entry for your <a name="line.794"></a>
<FONT color="green">795</FONT>     * non-searchable activities.<a name="line.795"></a>
<FONT color="green">796</FONT>     * &lt;pre class="prettyprint"&gt;<a name="line.796"></a>
<FONT color="green">797</FONT>     *        &amp;lt;application&amp;gt;<a name="line.797"></a>
<FONT color="green">798</FONT>     *            &amp;lt;meta-data android:name="android.app.default_searchable"<a name="line.798"></a>
<FONT color="green">799</FONT>     *                       android:value=".MySearchActivity" /&amp;gt;<a name="line.799"></a>
<FONT color="green">800</FONT>     *            <a name="line.800"></a>
<FONT color="green">801</FONT>     *            &amp;lt;!-- followed by activities, providers, etc... --&amp;gt;<a name="line.801"></a>
<FONT color="green">802</FONT>     *        &amp;lt;/application&amp;gt;&lt;/pre&gt;<a name="line.802"></a>
<FONT color="green">803</FONT>     *<a name="line.803"></a>
<FONT color="green">804</FONT>     * &lt;p&gt;You can also specify android.app.default_searchable on a per-activity basis, by including<a name="line.804"></a>
<FONT color="green">805</FONT>     * the meta-data element (as shown above) in one or more activity sections.  If found, these will<a name="line.805"></a>
<FONT color="green">806</FONT>     * override the reference in the application section.  The only reason to configure your application<a name="line.806"></a>
<FONT color="green">807</FONT>     * this way would be if you wish to partition it into separate sections with different search <a name="line.807"></a>
<FONT color="green">808</FONT>     * behaviors;  Otherwise this configuration is not recommended.<a name="line.808"></a>
<FONT color="green">809</FONT>     * <a name="line.809"></a>
<FONT color="green">810</FONT>     * &lt;p&gt;&lt;b&gt;Additional metadata for search suggestions.&lt;/b&gt;  If you have defined a content provider<a name="line.810"></a>
<FONT color="green">811</FONT>     * to generate search suggestions, you'll need to publish it to the system, and you'll need to <a name="line.811"></a>
<FONT color="green">812</FONT>     * provide a bit of additional XML metadata in order to configure communications with it.<a name="line.812"></a>
<FONT color="green">813</FONT>     * <a name="line.813"></a>
<FONT color="green">814</FONT>     * &lt;p&gt;First, in your &lt;a href="{@docRoot}guide/topics/manifest/manifest-intro.html"&gt;manifest&lt;/a&gt;, you'll add the<a name="line.814"></a>
<FONT color="green">815</FONT>     * following lines.<a name="line.815"></a>
<FONT color="green">816</FONT>     * &lt;pre class="prettyprint"&gt;<a name="line.816"></a>
<FONT color="green">817</FONT>     *        &amp;lt;!-- Content provider for search suggestions --&amp;gt;<a name="line.817"></a>
<FONT color="green">818</FONT>     *        &amp;lt;provider android:name="YourSuggestionProviderClass"<a name="line.818"></a>
<FONT color="green">819</FONT>     *                android:authorities="your.suggestion.authority" /&amp;gt;&lt;/pre&gt;<a name="line.819"></a>
<FONT color="green">820</FONT>     * <a name="line.820"></a>
<FONT color="green">821</FONT>     * &lt;p&gt;Next, you'll add a few lines to your XML metadata file, as shown:<a name="line.821"></a>
<FONT color="green">822</FONT>     * &lt;pre class="prettyprint"&gt;<a name="line.822"></a>
<FONT color="green">823</FONT>     *     &amp;lt;!-- Required attribute for any suggestions provider --&amp;gt;<a name="line.823"></a>
<FONT color="green">824</FONT>     *     android:searchSuggestAuthority="your.suggestion.authority"<a name="line.824"></a>
<FONT color="green">825</FONT>     *     <a name="line.825"></a>
<FONT color="green">826</FONT>     *     &amp;lt;!-- Optional attribute for configuring queries --&amp;gt;<a name="line.826"></a>
<FONT color="green">827</FONT>     *     android:searchSuggestSelection="field =?"<a name="line.827"></a>
<FONT color="green">828</FONT>     *     <a name="line.828"></a>
<FONT color="green">829</FONT>     *     &amp;lt;!-- Optional attributes for configuring intent construction --&amp;gt;<a name="line.829"></a>
<FONT color="green">830</FONT>     *     android:searchSuggestIntentAction="intent action string"<a name="line.830"></a>
<FONT color="green">831</FONT>     *     android:searchSuggestIntentData="intent data Uri" /&amp;gt;&lt;/pre&gt;<a name="line.831"></a>
<FONT color="green">832</FONT>     * <a name="line.832"></a>
<FONT color="green">833</FONT>     * &lt;p&gt;Elements of search metadata that support suggestions:<a name="line.833"></a>
<FONT color="green">834</FONT>     * &lt;table border="2" width="85%" align="center" frame="hsides" rules="rows"&gt;<a name="line.834"></a>
<FONT color="green">835</FONT>     *<a name="line.835"></a>
<FONT color="green">836</FONT>     *     &lt;thead&gt;<a name="line.836"></a>
<FONT color="green">837</FONT>     *     &lt;tr&gt;&lt;th&gt;Attribute&lt;/th&gt; &lt;th&gt;Description&lt;/th&gt; &lt;th&gt;Required?&lt;/th&gt;&lt;/tr&gt;<a name="line.837"></a>
<FONT color="green">838</FONT>     *     &lt;/thead&gt;<a name="line.838"></a>
<FONT color="green">839</FONT>     *<a name="line.839"></a>
<FONT color="green">840</FONT>     *     &lt;tbody&gt;<a name="line.840"></a>
<FONT color="green">841</FONT>     *     &lt;tr&gt;&lt;th&gt;android:searchSuggestAuthority&lt;/th&gt;<a name="line.841"></a>
<FONT color="green">842</FONT>     *         &lt;td&gt;This value must match the authority string provided in the &lt;i&gt;provider&lt;/i&gt; section <a name="line.842"></a>
<FONT color="green">843</FONT>     *             of your &lt;a href="{@docRoot}guide/topics/manifest/manifest-intro.html"&gt;manifest&lt;/a&gt;.&lt;/td&gt;<a name="line.843"></a>
<FONT color="green">844</FONT>     *         &lt;td align="center"&gt;Yes&lt;/td&gt;<a name="line.844"></a>
<FONT color="green">845</FONT>     *     &lt;/tr&gt;<a name="line.845"></a>
<FONT color="green">846</FONT>     *     <a name="line.846"></a>
<FONT color="green">847</FONT>     *     &lt;tr&gt;&lt;th&gt;android:searchSuggestPath&lt;/th&gt;<a name="line.847"></a>
<FONT color="green">848</FONT>     *         &lt;td&gt;If provided, this will be inserted in the suggestions query Uri, after the authority<a name="line.848"></a>
<FONT color="green">849</FONT>     *             you have provide but before the standard suggestions path.  This is only required if<a name="line.849"></a>
<FONT color="green">850</FONT>     *             you have a single content provider issuing different types of suggestions (e.g. for<a name="line.850"></a>
<FONT color="green">851</FONT>     *             different data types) and you need a way to disambiguate the suggestions queries<a name="line.851"></a>
<FONT color="green">852</FONT>     *             when they are received.&lt;/td&gt;<a name="line.852"></a>
<FONT color="green">853</FONT>     *         &lt;td align="center"&gt;No&lt;/td&gt;<a name="line.853"></a>
<FONT color="green">854</FONT>     *     &lt;/tr&gt;<a name="line.854"></a>
<FONT color="green">855</FONT>     *     <a name="line.855"></a>
<FONT color="green">856</FONT>     *     &lt;tr&gt;&lt;th&gt;android:searchSuggestSelection&lt;/th&gt;<a name="line.856"></a>
<FONT color="green">857</FONT>     *         &lt;td&gt;If provided, this value will be passed into your query function as the <a name="line.857"></a>
<FONT color="green">858</FONT>     *             &lt;i&gt;selection&lt;/i&gt; parameter.  Typically this will be a WHERE clause for your database, <a name="line.858"></a>
<FONT color="green">859</FONT>     *             and will contain a single question mark, which represents the actual query string <a name="line.859"></a>
<FONT color="green">860</FONT>     *             that has been typed by the user.  However, you can also use any non-null value<a name="line.860"></a>
<FONT color="green">861</FONT>     *             to simply trigger the delivery of the query text (via selection arguments), and then<a name="line.861"></a>
<FONT color="green">862</FONT>     *             use the query text in any way appropriate for your provider (ignoring the actual<a name="line.862"></a>
<FONT color="green">863</FONT>     *             text of the selection parameter.)&lt;/td&gt;<a name="line.863"></a>
<FONT color="green">864</FONT>     *         &lt;td align="center"&gt;No&lt;/td&gt;<a name="line.864"></a>
<FONT color="green">865</FONT>     *     &lt;/tr&gt;<a name="line.865"></a>
<FONT color="green">866</FONT>     *     <a name="line.866"></a>
<FONT color="green">867</FONT>     *     &lt;tr&gt;&lt;th&gt;android:searchSuggestIntentAction&lt;/th&gt;<a name="line.867"></a>
<FONT color="green">868</FONT>     *         &lt;td&gt;If provided, and not overridden by the selected suggestion, this value will be <a name="line.868"></a>
<FONT color="green">869</FONT>     *             placed in the action field of the {@link android.content.Intent Intent} when the <a name="line.869"></a>
<FONT color="green">870</FONT>     *             user clicks a suggestion.&lt;/td&gt;<a name="line.870"></a>
<FONT color="green">871</FONT>     *         &lt;td align="center"&gt;No&lt;/td&gt;<a name="line.871"></a>
<FONT color="green">872</FONT>     *     <a name="line.872"></a>
<FONT color="green">873</FONT>     *     &lt;tr&gt;&lt;th&gt;android:searchSuggestIntentData&lt;/th&gt;<a name="line.873"></a>
<FONT color="green">874</FONT>     *         &lt;td&gt;If provided, and not overridden by the selected suggestion, this value will be <a name="line.874"></a>
<FONT color="green">875</FONT>     *             placed in the data field of the {@link android.content.Intent Intent} when the user <a name="line.875"></a>
<FONT color="green">876</FONT>     *             clicks a suggestion.&lt;/td&gt;<a name="line.876"></a>
<FONT color="green">877</FONT>     *         &lt;td align="center"&gt;No&lt;/td&gt;<a name="line.877"></a>
<FONT color="green">878</FONT>     *     &lt;/tr&gt;<a name="line.878"></a>
<FONT color="green">879</FONT>     *     <a name="line.879"></a>
<FONT color="green">880</FONT>     *     &lt;/tbody&gt;<a name="line.880"></a>
<FONT color="green">881</FONT>     * &lt;/table&gt;<a name="line.881"></a>
<FONT color="green">882</FONT>     * <a name="line.882"></a>
<FONT color="green">883</FONT>     * &lt;p&gt;&lt;b&gt;Additional metadata for search action keys.&lt;/b&gt;  For each action key that you would like to<a name="line.883"></a>
<FONT color="green">884</FONT>     * define, you'll need to add an additional element defining that key, and using the attributes<a name="line.884"></a>
<FONT color="green">885</FONT>     * discussed in &lt;a href="#ActionKeys"&gt;Action Keys&lt;/a&gt;.  A simple example is shown here:<a name="line.885"></a>
<FONT color="green">886</FONT>     * <a name="line.886"></a>
<FONT color="green">887</FONT>     * &lt;pre class="prettyprint"&gt;&amp;lt;actionkey<a name="line.887"></a>
<FONT color="green">888</FONT>     *     android:keycode="KEYCODE_CALL"<a name="line.888"></a>
<FONT color="green">889</FONT>     *     android:queryActionMsg="call"<a name="line.889"></a>
<FONT color="green">890</FONT>     *     android:suggestActionMsg="call"<a name="line.890"></a>
<FONT color="green">891</FONT>     *     android:suggestActionMsgColumn="call_column" /&amp;gt;&lt;/pre&gt;<a name="line.891"></a>
<FONT color="green">892</FONT>     *<a name="line.892"></a>
<FONT color="green">893</FONT>     * &lt;p&gt;Elements of search metadata that support search action keys.  Note that although each of the<a name="line.893"></a>
<FONT color="green">894</FONT>     * action message elements are marked as &lt;i&gt;optional&lt;/i&gt;, at least one must be present for the <a name="line.894"></a>
<FONT color="green">895</FONT>     * action key to have any effect.<a name="line.895"></a>
<FONT color="green">896</FONT>     * <a name="line.896"></a>
<FONT color="green">897</FONT>     * &lt;table border="2" width="85%" align="center" frame="hsides" rules="rows"&gt;<a name="line.897"></a>
<FONT color="green">898</FONT>     *<a name="line.898"></a>
<FONT color="green">899</FONT>     *     &lt;thead&gt;<a name="line.899"></a>
<FONT color="green">900</FONT>     *     &lt;tr&gt;&lt;th&gt;Attribute&lt;/th&gt; &lt;th&gt;Description&lt;/th&gt; &lt;th&gt;Required?&lt;/th&gt;&lt;/tr&gt;<a name="line.900"></a>
<FONT color="green">901</FONT>     *     &lt;/thead&gt;<a name="line.901"></a>
<FONT color="green">902</FONT>     *<a name="line.902"></a>
<FONT color="green">903</FONT>     *     &lt;tbody&gt;<a name="line.903"></a>
<FONT color="green">904</FONT>     *     &lt;tr&gt;&lt;th&gt;android:keycode&lt;/th&gt;<a name="line.904"></a>
<FONT color="green">905</FONT>     *         &lt;td&gt;This attribute denotes the action key you wish to respond to.  Note that not<a name="line.905"></a>
<FONT color="green">906</FONT>     *             all action keys are actually supported using this mechanism, as many of them are<a name="line.906"></a>
<FONT color="green">907</FONT>     *             used for typing, navigation, or system functions.  This will be added to the <a name="line.907"></a>
<FONT color="green">908</FONT>     *             {@link android.content.Intent#ACTION_SEARCH ACTION_SEARCH} intent that is passed to <a name="line.908"></a>
<FONT color="green">909</FONT>     *             your searchable activity.  To examine the key code, use <a name="line.909"></a>
<FONT color="green">910</FONT>     *             {@link android.content.Intent#getIntExtra getIntExtra(SearchManager.ACTION_KEY)}.  <a name="line.910"></a>
<FONT color="green">911</FONT>     *             &lt;p&gt;Note, in addition to the keycode, you must also provide one or more of the action<a name="line.911"></a>
<FONT color="green">912</FONT>     *             specifier attributes.&lt;/td&gt;<a name="line.912"></a>
<FONT color="green">913</FONT>     *         &lt;td align="center"&gt;Yes&lt;/td&gt;<a name="line.913"></a>
<FONT color="green">914</FONT>     *     &lt;/tr&gt;<a name="line.914"></a>
<FONT color="green">915</FONT>     *     <a name="line.915"></a>
<FONT color="green">916</FONT>     *     &lt;tr&gt;&lt;th&gt;android:queryActionMsg&lt;/th&gt;<a name="line.916"></a>
<FONT color="green">917</FONT>     *         &lt;td&gt;If you wish to handle an action key during normal search query entry, you<a name="line.917"></a>
<FONT color="green">918</FONT>     *          must define an action string here.  This will be added to the <a name="line.918"></a>
<FONT color="green">919</FONT>     *          {@link android.content.Intent#ACTION_SEARCH ACTION_SEARCH} intent that is passed to your<a name="line.919"></a>
<FONT color="green">920</FONT>     *          searchable activity.  To examine the string, use <a name="line.920"></a>
<FONT color="green">921</FONT>     *          {@link android.content.Intent#getStringExtra <a name="line.921"></a>
<FONT color="green">922</FONT>     *          getStringExtra(SearchManager.ACTION_MSG)}.&lt;/td&gt;<a name="line.922"></a>
<FONT color="green">923</FONT>     *         &lt;td align="center"&gt;No&lt;/td&gt;<a name="line.923"></a>
<FONT color="green">924</FONT>     *     &lt;/tr&gt;<a name="line.924"></a>
<FONT color="green">925</FONT>     *     <a name="line.925"></a>
<FONT color="green">926</FONT>     *     &lt;tr&gt;&lt;th&gt;android:suggestActionMsg&lt;/th&gt;<a name="line.926"></a>
<FONT color="green">927</FONT>     *         &lt;td&gt;If you wish to handle an action key while a suggestion is being displayed &lt;i&gt;and<a name="line.927"></a>
<FONT color="green">928</FONT>     *             selected&lt;/i&gt;, there are two ways to handle this.  If &lt;i&gt;all&lt;/i&gt; of your suggestions<a name="line.928"></a>
<FONT color="green">929</FONT>     *             can handle the action key, you can simply define the action message using this <a name="line.929"></a>
<FONT color="green">930</FONT>     *             attribute.  This will be added to the <a name="line.930"></a>
<FONT color="green">931</FONT>     *             {@link android.content.Intent#ACTION_SEARCH ACTION_SEARCH} intent that is passed to<a name="line.931"></a>
<FONT color="green">932</FONT>     *             your searchable activity.  To examine the string, use <a name="line.932"></a>
<FONT color="green">933</FONT>     *             {@link android.content.Intent#getStringExtra <a name="line.933"></a>
<FONT color="green">934</FONT>     *             getStringExtra(SearchManager.ACTION_MSG)}.&lt;/td&gt;<a name="line.934"></a>
<FONT color="green">935</FONT>     *         &lt;td align="center"&gt;No&lt;/td&gt;<a name="line.935"></a>
<FONT color="green">936</FONT>     *     &lt;/tr&gt;<a name="line.936"></a>
<FONT color="green">937</FONT>     *     <a name="line.937"></a>
<FONT color="green">938</FONT>     *     &lt;tr&gt;&lt;th&gt;android:suggestActionMsgColumn&lt;/th&gt;<a name="line.938"></a>
<FONT color="green">939</FONT>     *         &lt;td&gt;If you wish to handle an action key while a suggestion is being displayed &lt;i&gt;and<a name="line.939"></a>
<FONT color="green">940</FONT>     *             selected&lt;/i&gt;, but you do not wish to enable this action key for every suggestion, <a name="line.940"></a>
<FONT color="green">941</FONT>     *             then you can use this attribute to control it on a suggestion-by-suggestion basis.<a name="line.941"></a>
<FONT color="green">942</FONT>     *             First, you must define a column (and name it here) where your suggestions will <a name="line.942"></a>
<FONT color="green">943</FONT>     *             include the action string.  Then, in your content provider, you must provide this<a name="line.943"></a>
<FONT color="green">944</FONT>     *             column, and when desired, provide data in this column.<a name="line.944"></a>
<FONT color="green">945</FONT>     *             The search manager will look at your suggestion cursor, using the string <a name="line.945"></a>
<FONT color="green">946</FONT>     *             provided here in order to select a column, and will use that to select a string from <a name="line.946"></a>
<FONT color="green">947</FONT>     *             the cursor.  That string will be added to the <a name="line.947"></a>
<FONT color="green">948</FONT>     *             {@link android.content.Intent#ACTION_SEARCH ACTION_SEARCH} intent that is passed to <a name="line.948"></a>
<FONT color="green">949</FONT>     *             your searchable activity.  To examine the string, use <a name="line.949"></a>
<FONT color="green">950</FONT>     *             {@link android.content.Intent#getStringExtra <a name="line.950"></a>
<FONT color="green">951</FONT>     *             getStringExtra(SearchManager.ACTION_MSG)}.  &lt;i&gt;If the data does not exist for the<a name="line.951"></a>
<FONT color="green">952</FONT>     *             selection suggestion, the action key will be ignored.&lt;/i&gt;&lt;/td&gt;<a name="line.952"></a>
<FONT color="green">953</FONT>     *         &lt;td align="center"&gt;No&lt;/td&gt;<a name="line.953"></a>
<FONT color="green">954</FONT>     *     &lt;/tr&gt;<a name="line.954"></a>
<FONT color="green">955</FONT>     * <a name="line.955"></a>
<FONT color="green">956</FONT>     *     &lt;/tbody&gt;<a name="line.956"></a>
<FONT color="green">957</FONT>     * &lt;/table&gt;<a name="line.957"></a>
<FONT color="green">958</FONT>     * <a name="line.958"></a>
<FONT color="green">959</FONT>     * &lt;p&gt;&lt;b&gt;Additional metadata for enabling voice search.&lt;/b&gt;  To enable voice search for your<a name="line.959"></a>
<FONT color="green">960</FONT>     * activity, you can add fields to the metadata that enable and configure voice search.  When<a name="line.960"></a>
<FONT color="green">961</FONT>     * enabled (and available on the device), a voice search button will be displayed in the<a name="line.961"></a>
<FONT color="green">962</FONT>     * Search UI.  Clicking this button will launch a voice search activity.  When the user has<a name="line.962"></a>
<FONT color="green">963</FONT>     * finished speaking, the voice search phrase will be transcribed into text and presented to the<a name="line.963"></a>
<FONT color="green">964</FONT>     * searchable activity as if it were a typed query.<a name="line.964"></a>
<FONT color="green">965</FONT>     * <a name="line.965"></a>
<FONT color="green">966</FONT>     * &lt;p&gt;Elements of search metadata that support voice search:<a name="line.966"></a>
<FONT color="green">967</FONT>     * &lt;table border="2" width="85%" align="center" frame="hsides" rules="rows"&gt;<a name="line.967"></a>
<FONT color="green">968</FONT>     *<a name="line.968"></a>
<FONT color="green">969</FONT>     *     &lt;thead&gt;<a name="line.969"></a>
<FONT color="green">970</FONT>     *     &lt;tr&gt;&lt;th&gt;Attribute&lt;/th&gt; &lt;th&gt;Description&lt;/th&gt; &lt;th&gt;Required?&lt;/th&gt;&lt;/tr&gt;<a name="line.970"></a>
<FONT color="green">971</FONT>     *     &lt;/thead&gt;<a name="line.971"></a>
<FONT color="green">972</FONT>     *     <a name="line.972"></a>
<FONT color="green">973</FONT>     *     &lt;tr&gt;&lt;th&gt;android:voiceSearchMode&lt;/th&gt;<a name="line.973"></a>
<FONT color="green">974</FONT>     *         &lt;td&gt;If provided and non-zero, enables voice search.  (Voice search may not be<a name="line.974"></a>
<FONT color="green">975</FONT>     *             provided by the device, in which case these flags will have no effect.)  The<a name="line.975"></a>
<FONT color="green">976</FONT>     *             following mode bits are defined:<a name="line.976"></a>
<FONT color="green">977</FONT>     *             &lt;table border="2" align="center" frame="hsides" rules="rows"&gt;<a name="line.977"></a>
<FONT color="green">978</FONT>     *                 &lt;tbody&gt;<a name="line.978"></a>
<FONT color="green">979</FONT>     *                 &lt;tr&gt;&lt;th&gt;showVoiceSearchButton&lt;/th&gt;<a name="line.979"></a>
<FONT color="green">980</FONT>     *                     &lt;td&gt;If set, display a voice search button.  This only takes effect if voice<a name="line.980"></a>
<FONT color="green">981</FONT>     *                         search is available on the device.  If set, then launchWebSearch or<a name="line.981"></a>
<FONT color="green">982</FONT>     *                         launchRecognizer must also be set.&lt;/td&gt;<a name="line.982"></a>
<FONT color="green">983</FONT>     *                 &lt;/tr&gt;<a name="line.983"></a>
<FONT color="green">984</FONT>     *                 &lt;tr&gt;&lt;th&gt;launchWebSearch&lt;/th&gt;<a name="line.984"></a>
<FONT color="green">985</FONT>     *                     &lt;td&gt;If set, the voice search button will take the user directly to a <a name="line.985"></a>
<FONT color="green">986</FONT>     *                         built-in voice web search activity.  Most applications will not use this<a name="line.986"></a>
<FONT color="green">987</FONT>     *                         flag, as it will take the user away from the activity in which search<a name="line.987"></a>
<FONT color="green">988</FONT>     *                         was invoked.&lt;/td&gt;<a name="line.988"></a>
<FONT color="green">989</FONT>     *                 &lt;/tr&gt;<a name="line.989"></a>
<FONT color="green">990</FONT>     *                 &lt;tr&gt;&lt;th&gt;launchRecognizer&lt;/th&gt;<a name="line.990"></a>
<FONT color="green">991</FONT>     *                     &lt;td&gt;If set, the voice search button will take the user directly to a<a name="line.991"></a>
<FONT color="green">992</FONT>     *                         built-in voice recording activity.  This activity will prompt the user<a name="line.992"></a>
<FONT color="green">993</FONT>     *                         to speak, transcribe the spoken text, and forward the resulting query<a name="line.993"></a>
<FONT color="green">994</FONT>     *                         text to the searchable activity, just as if the user had typed it into<a name="line.994"></a>
<FONT color="green">995</FONT>     *                         the search UI and clicked the search button.&lt;/td&gt;<a name="line.995"></a>
<FONT color="green">996</FONT>     *                 &lt;/tr&gt;<a name="line.996"></a>
<FONT color="green">997</FONT>     *                 &lt;/tbody&gt;<a name="line.997"></a>
<FONT color="green">998</FONT>     *            &lt;/table&gt;&lt;/td&gt;<a name="line.998"></a>
<FONT color="green">999</FONT>     *         &lt;td align="center"&gt;No&lt;/td&gt;<a name="line.999"></a>
<FONT color="green">1000</FONT>     *     &lt;/tr&gt;<a name="line.1000"></a>
<FONT color="green">1001</FONT>     *     <a name="line.1001"></a>
<FONT color="green">1002</FONT>     *     &lt;tr&gt;&lt;th&gt;android:voiceLanguageModel&lt;/th&gt;<a name="line.1002"></a>
<FONT color="green">1003</FONT>     *         &lt;td&gt;If provided, this specifies the language model that should be used by the voice<a name="line.1003"></a>
<FONT color="green">1004</FONT>     *             recognition system.  <a name="line.1004"></a>
<FONT color="green">1005</FONT>     *             See {@link android.speech.RecognizerIntent#EXTRA_LANGUAGE_MODEL}<a name="line.1005"></a>
<FONT color="green">1006</FONT>     *             for more information.  If not provided, the default value<a name="line.1006"></a>
<FONT color="green">1007</FONT>     *             {@link android.speech.RecognizerIntent#LANGUAGE_MODEL_FREE_FORM} will be used.&lt;/td&gt;<a name="line.1007"></a>
<FONT color="green">1008</FONT>     *         &lt;td align="center"&gt;No&lt;/td&gt;<a name="line.1008"></a>
<FONT color="green">1009</FONT>     *     &lt;/tr&gt;<a name="line.1009"></a>
<FONT color="green">1010</FONT>     *     <a name="line.1010"></a>
<FONT color="green">1011</FONT>     *     &lt;tr&gt;&lt;th&gt;android:voicePromptText&lt;/th&gt;<a name="line.1011"></a>
<FONT color="green">1012</FONT>     *         &lt;td&gt;If provided, this specifies a prompt that will be displayed during voice input.<a name="line.1012"></a>
<FONT color="green">1013</FONT>     *             (If not provided, a default prompt will be displayed.)&lt;/td&gt;<a name="line.1013"></a>
<FONT color="green">1014</FONT>     *         &lt;td align="center"&gt;No&lt;/td&gt;<a name="line.1014"></a>
<FONT color="green">1015</FONT>     *     &lt;/tr&gt;<a name="line.1015"></a>
<FONT color="green">1016</FONT>     *     <a name="line.1016"></a>
<FONT color="green">1017</FONT>     *     &lt;tr&gt;&lt;th&gt;android:voiceLanguage&lt;/th&gt;<a name="line.1017"></a>
<FONT color="green">1018</FONT>     *         &lt;td&gt;If provided, this specifies the spoken language to be expected.  This is only<a name="line.1018"></a>
<FONT color="green">1019</FONT>     *             needed if it is different from the current value of<a name="line.1019"></a>
<FONT color="green">1020</FONT>     *             {@link java.util.Locale#getDefault()}.<a name="line.1020"></a>
<FONT color="green">1021</FONT>     *             &lt;/td&gt;<a name="line.1021"></a>
<FONT color="green">1022</FONT>     *         &lt;td align="center"&gt;No&lt;/td&gt;<a name="line.1022"></a>
<FONT color="green">1023</FONT>     *     &lt;/tr&gt;<a name="line.1023"></a>
<FONT color="green">1024</FONT>     *     <a name="line.1024"></a>
<FONT color="green">1025</FONT>     *     &lt;tr&gt;&lt;th&gt;android:voiceMaxResults&lt;/th&gt;<a name="line.1025"></a>
<FONT color="green">1026</FONT>     *         &lt;td&gt;If provided, enforces the maximum number of results to return, including the "best"<a name="line.1026"></a>
<FONT color="green">1027</FONT>     *             result which will always be provided as the SEARCH intent's primary query.  Must be<a name="line.1027"></a>
<FONT color="green">1028</FONT>     *             one or greater.  Use {@link android.speech.RecognizerIntent#EXTRA_RESULTS} <a name="line.1028"></a>
<FONT color="green">1029</FONT>     *             to get the results from the intent.  If not provided, the recognizer will choose<a name="line.1029"></a>
<FONT color="green">1030</FONT>     *             how many results to return.&lt;/td&gt;<a name="line.1030"></a>
<FONT color="green">1031</FONT>     *         &lt;td align="center"&gt;No&lt;/td&gt;<a name="line.1031"></a>
<FONT color="green">1032</FONT>     *     &lt;/tr&gt;<a name="line.1032"></a>
<FONT color="green">1033</FONT>     * <a name="line.1033"></a>
<FONT color="green">1034</FONT>     *     &lt;/tbody&gt;<a name="line.1034"></a>
<FONT color="green">1035</FONT>     * &lt;/table&gt;<a name="line.1035"></a>
<FONT color="green">1036</FONT>     * <a name="line.1036"></a>
<FONT color="green">1037</FONT>     * &lt;a name="PassingSearchContext"&gt;&lt;/a&gt;<a name="line.1037"></a>
<FONT color="green">1038</FONT>     * &lt;h3&gt;Passing Search Context&lt;/h3&gt;<a name="line.1038"></a>
<FONT color="green">1039</FONT>     * <a name="line.1039"></a>
<FONT color="green">1040</FONT>     * &lt;p&gt;In order to improve search experience, an application may wish to specify<a name="line.1040"></a>
<FONT color="green">1041</FONT>     * additional data along with the search, such as local history or context.  For<a name="line.1041"></a>
<FONT color="green">1042</FONT>     * example, a maps search would be improved by including the current location.  <a name="line.1042"></a>
<FONT color="green">1043</FONT>     * In order to simplify the structure of your activities, this can be done using <a name="line.1043"></a>
<FONT color="green">1044</FONT>     * the search manager.<a name="line.1044"></a>
<FONT color="green">1045</FONT>     *<a name="line.1045"></a>
<FONT color="green">1046</FONT>     * &lt;p&gt;Any data can be provided at the time the search is launched, as long as it<a name="line.1046"></a>
<FONT color="green">1047</FONT>     * can be stored in a {@link android.os.Bundle Bundle} object.<a name="line.1047"></a>
<FONT color="green">1048</FONT>     *<a name="line.1048"></a>
<FONT color="green">1049</FONT>     * &lt;p&gt;To pass application data into the Search Manager, you'll need to override<a name="line.1049"></a>
<FONT color="green">1050</FONT>     * {@link android.app.Activity#onSearchRequested onSearchRequested} as follows:<a name="line.1050"></a>
<FONT color="green">1051</FONT>     *<a name="line.1051"></a>
<FONT color="green">1052</FONT>     * &lt;pre class="prettyprint"&gt;<a name="line.1052"></a>
<FONT color="green">1053</FONT>     * &amp;#64;Override<a name="line.1053"></a>
<FONT color="green">1054</FONT>     * public boolean onSearchRequested() {<a name="line.1054"></a>
<FONT color="green">1055</FONT>     *     Bundle appData = new Bundle();<a name="line.1055"></a>
<FONT color="green">1056</FONT>     *     appData.put...();<a name="line.1056"></a>
<FONT color="green">1057</FONT>     *     appData.put...();<a name="line.1057"></a>
<FONT color="green">1058</FONT>     *     startSearch(null, false, appData);<a name="line.1058"></a>
<FONT color="green">1059</FONT>     *     return true;<a name="line.1059"></a>
<FONT color="green">1060</FONT>     * }&lt;/pre&gt; <a name="line.1060"></a>
<FONT color="green">1061</FONT>     *<a name="line.1061"></a>
<FONT color="green">1062</FONT>     * &lt;p&gt;To receive application data from the Search Manager, you'll extract it from<a name="line.1062"></a>
<FONT color="green">1063</FONT>     * the {@link android.content.Intent#ACTION_SEARCH ACTION_SEARCH}<a name="line.1063"></a>
<FONT color="green">1064</FONT>     * {@link android.content.Intent Intent} as follows:<a name="line.1064"></a>
<FONT color="green">1065</FONT>     *<a name="line.1065"></a>
<FONT color="green">1066</FONT>     * &lt;pre class="prettyprint"&gt;<a name="line.1066"></a>
<FONT color="green">1067</FONT>     * final Bundle appData = queryIntent.getBundleExtra(SearchManager.APP_DATA);<a name="line.1067"></a>
<FONT color="green">1068</FONT>     * if (appData != null) {<a name="line.1068"></a>
<FONT color="green">1069</FONT>     *     appData.get...();<a name="line.1069"></a>
<FONT color="green">1070</FONT>     *     appData.get...();<a name="line.1070"></a>
<FONT color="green">1071</FONT>     * }&lt;/pre&gt;<a name="line.1071"></a>
<FONT color="green">1072</FONT>     * <a name="line.1072"></a>
<FONT color="green">1073</FONT>     * &lt;a name="ProtectingUserPrivacy"&gt;&lt;/a&gt;<a name="line.1073"></a>
<FONT color="green">1074</FONT>     * &lt;h3&gt;Protecting User Privacy&lt;/h3&gt;<a name="line.1074"></a>
<FONT color="green">1075</FONT>     * <a name="line.1075"></a>
<FONT color="green">1076</FONT>     * &lt;p&gt;Many users consider their activities on the phone, including searches, to be private <a name="line.1076"></a>
<FONT color="green">1077</FONT>     * information.  Applications that implement search should take steps to protect users' privacy<a name="line.1077"></a>
<FONT color="green">1078</FONT>     * wherever possible.  This section covers two areas of concern, but you should consider your search<a name="line.1078"></a>
<FONT color="green">1079</FONT>     * design carefully and take any additional steps necessary.<a name="line.1079"></a>
<FONT color="green">1080</FONT>     * <a name="line.1080"></a>
<FONT color="green">1081</FONT>     * &lt;p&gt;&lt;b&gt;Don't send personal information to servers, and if you do, don't log it.&lt;/b&gt;<a name="line.1081"></a>
<FONT color="green">1082</FONT>     * "Personal information" is information that can personally identify your users, such as name, <a name="line.1082"></a>
<FONT color="green">1083</FONT>     * email address or billing information, or other data which can be reasonably linked to such <a name="line.1083"></a>
<FONT color="green">1084</FONT>     * information.  If your application implements search with the assistance of a server, try to <a name="line.1084"></a>
<FONT color="green">1085</FONT>     * avoid sending personal information with your searches.  For example, if you are searching for <a name="line.1085"></a>
<FONT color="green">1086</FONT>     * businesses near a zip code, you don't need to send the user ID as well - just send the zip code<a name="line.1086"></a>
<FONT color="green">1087</FONT>     * to the server.  If you do need to send personal information, you should take steps to avoid <a name="line.1087"></a>
<FONT color="green">1088</FONT>     * logging it.  If you must log it, you should protect that data very carefully, and erase it as <a name="line.1088"></a>
<FONT color="green">1089</FONT>     * soon as possible.<a name="line.1089"></a>
<FONT color="green">1090</FONT>     * <a name="line.1090"></a>
<FONT color="green">1091</FONT>     * &lt;p&gt;&lt;b&gt;Provide the user with a way to clear their search history.&lt;/b&gt;  The Search Manager helps<a name="line.1091"></a>
<FONT color="green">1092</FONT>     * your application provide context-specific suggestions.  Sometimes these suggestions are based<a name="line.1092"></a>
<FONT color="green">1093</FONT>     * on previous searches, or other actions taken by the user in an earlier session.  A user may not<a name="line.1093"></a>
<FONT color="green">1094</FONT>     * wish for previous searches to be revealed to other users, for instance if they share their phone<a name="line.1094"></a>
<FONT color="green">1095</FONT>     * with a friend.  If your application provides suggestions that can reveal previous activities,<a name="line.1095"></a>
<FONT color="green">1096</FONT>     * you should implement a "Clear History" menu, preference, or button.  If you are using <a name="line.1096"></a>
<FONT color="green">1097</FONT>     * {@link android.provider.SearchRecentSuggestions}, you can simply call its <a name="line.1097"></a>
<FONT color="green">1098</FONT>     * {@link android.provider.SearchRecentSuggestions#clearHistory() clearHistory()} method from<a name="line.1098"></a>
<FONT color="green">1099</FONT>     * your "Clear History" UI.  If you are implementing your own form of recent suggestions, you'll <a name="line.1099"></a>
<FONT color="green">1100</FONT>     * need to provide a similar a "clear history" API in your provider, and call it from your<a name="line.1100"></a>
<FONT color="green">1101</FONT>     * "Clear History" UI.<a name="line.1101"></a>
<FONT color="green">1102</FONT>     */<a name="line.1102"></a>
<FONT color="green">1103</FONT>    public class SearchManager <a name="line.1103"></a>
<FONT color="green">1104</FONT>            implements DialogInterface.OnDismissListener, DialogInterface.OnCancelListener<a name="line.1104"></a>
<FONT color="green">1105</FONT>    {<a name="line.1105"></a>
<FONT color="green">1106</FONT>        /**<a name="line.1106"></a>
<FONT color="green">1107</FONT>         * This is a shortcut definition for the default menu key to use for invoking search.<a name="line.1107"></a>
<FONT color="green">1108</FONT>         * <a name="line.1108"></a>
<FONT color="green">1109</FONT>         * See Menu.Item.setAlphabeticShortcut() for more information.<a name="line.1109"></a>
<FONT color="green">1110</FONT>         */<a name="line.1110"></a>
<FONT color="green">1111</FONT>        public final static char MENU_KEY = 's';<a name="line.1111"></a>
<FONT color="green">1112</FONT>    <a name="line.1112"></a>
<FONT color="green">1113</FONT>        /**<a name="line.1113"></a>
<FONT color="green">1114</FONT>         * This is a shortcut definition for the default menu key to use for invoking search.<a name="line.1114"></a>
<FONT color="green">1115</FONT>         * <a name="line.1115"></a>
<FONT color="green">1116</FONT>         * See Menu.Item.setAlphabeticShortcut() for more information.<a name="line.1116"></a>
<FONT color="green">1117</FONT>         */<a name="line.1117"></a>
<FONT color="green">1118</FONT>        public final static int MENU_KEYCODE = KeyEvent.KEYCODE_S;<a name="line.1118"></a>
<FONT color="green">1119</FONT>    <a name="line.1119"></a>
<FONT color="green">1120</FONT>        /**<a name="line.1120"></a>
<FONT color="green">1121</FONT>         * Intent extra data key: Use this key with <a name="line.1121"></a>
<FONT color="green">1122</FONT>         * {@link android.content.Intent#getStringExtra<a name="line.1122"></a>
<FONT color="green">1123</FONT>         *  content.Intent.getStringExtra()}<a name="line.1123"></a>
<FONT color="green">1124</FONT>         * to obtain the query string from Intent.ACTION_SEARCH.<a name="line.1124"></a>
<FONT color="green">1125</FONT>         */<a name="line.1125"></a>
<FONT color="green">1126</FONT>        public final static String QUERY = "query";<a name="line.1126"></a>
<FONT color="green">1127</FONT>    <a name="line.1127"></a>
<FONT color="green">1128</FONT>        /**<a name="line.1128"></a>
<FONT color="green">1129</FONT>         * Intent extra data key: Use this key with Intent.ACTION_SEARCH and<a name="line.1129"></a>
<FONT color="green">1130</FONT>         * {@link android.content.Intent#getBundleExtra<a name="line.1130"></a>
<FONT color="green">1131</FONT>         *  content.Intent.getBundleExtra()}<a name="line.1131"></a>
<FONT color="green">1132</FONT>         * to obtain any additional app-specific data that was inserted by the <a name="line.1132"></a>
<FONT color="green">1133</FONT>         * activity that launched the search.<a name="line.1133"></a>
<FONT color="green">1134</FONT>         */<a name="line.1134"></a>
<FONT color="green">1135</FONT>        public final static String APP_DATA = "app_data";<a name="line.1135"></a>
<FONT color="green">1136</FONT>    <a name="line.1136"></a>
<FONT color="green">1137</FONT>        /**<a name="line.1137"></a>
<FONT color="green">1138</FONT>         * Intent app_data bundle key: Use this key with the bundle from<a name="line.1138"></a>
<FONT color="green">1139</FONT>         * {@link android.content.Intent#getBundleExtra<a name="line.1139"></a>
<FONT color="green">1140</FONT>         * content.Intent.getBundleExtra(APP_DATA)} to obtain the source identifier<a name="line.1140"></a>
<FONT color="green">1141</FONT>         * set by the activity that launched the search.<a name="line.1141"></a>
<FONT color="green">1142</FONT>         *<a name="line.1142"></a>
<FONT color="green">1143</FONT>         * @hide<a name="line.1143"></a>
<FONT color="green">1144</FONT>         */<a name="line.1144"></a>
<FONT color="green">1145</FONT>        public final static String SOURCE = "source";<a name="line.1145"></a>
<FONT color="green">1146</FONT>        <a name="line.1146"></a>
<FONT color="green">1147</FONT>        /**<a name="line.1147"></a>
<FONT color="green">1148</FONT>         * Intent extra data key: Use this key with Intent.ACTION_SEARCH and<a name="line.1148"></a>
<FONT color="green">1149</FONT>         * {@link android.content.Intent#getIntExtra content.Intent.getIntExtra()}<a name="line.1149"></a>
<FONT color="green">1150</FONT>         * to obtain the keycode that the user used to trigger this query.  It will be zero if the<a name="line.1150"></a>
<FONT color="green">1151</FONT>         * user simply pressed the "GO" button on the search UI.  This is primarily used in conjunction<a name="line.1151"></a>
<FONT color="green">1152</FONT>         * with the keycode attribute in the actionkey element of your searchable.xml configuration<a name="line.1152"></a>
<FONT color="green">1153</FONT>         * file.<a name="line.1153"></a>
<FONT color="green">1154</FONT>         */<a name="line.1154"></a>
<FONT color="green">1155</FONT>        public final static String ACTION_KEY = "action_key";<a name="line.1155"></a>
<FONT color="green">1156</FONT>        <a name="line.1156"></a>
<FONT color="green">1157</FONT>        /**<a name="line.1157"></a>
<FONT color="green">1158</FONT>         * Intent extra data key: Use this key with Intent.ACTION_SEARCH and<a name="line.1158"></a>
<FONT color="green">1159</FONT>         * {@link android.content.Intent#getStringExtra content.Intent.getStringExtra()}<a name="line.1159"></a>
<FONT color="green">1160</FONT>         * to obtain the action message that was defined for a particular search action key and/or<a name="line.1160"></a>
<FONT color="green">1161</FONT>         * suggestion.  It will be null if the search was launched by typing "enter", touched the the <a name="line.1161"></a>
<FONT color="green">1162</FONT>         * "GO" button, or other means not involving any action key. <a name="line.1162"></a>
<FONT color="green">1163</FONT>         */<a name="line.1163"></a>
<FONT color="green">1164</FONT>        public final static String ACTION_MSG = "action_msg";<a name="line.1164"></a>
<FONT color="green">1165</FONT>        <a name="line.1165"></a>
<FONT color="green">1166</FONT>        /**<a name="line.1166"></a>
<FONT color="green">1167</FONT>         * Uri path for queried suggestions data.  This is the path that the search manager<a name="line.1167"></a>
<FONT color="green">1168</FONT>         * will use when querying your content provider for suggestions data based on user input<a name="line.1168"></a>
<FONT color="green">1169</FONT>         * (e.g. looking for partial matches).<a name="line.1169"></a>
<FONT color="green">1170</FONT>         * Typically you'll use this with a URI matcher.<a name="line.1170"></a>
<FONT color="green">1171</FONT>         */<a name="line.1171"></a>
<FONT color="green">1172</FONT>        public final static String SUGGEST_URI_PATH_QUERY = "search_suggest_query";<a name="line.1172"></a>
<FONT color="green">1173</FONT>        <a name="line.1173"></a>
<FONT color="green">1174</FONT>        /**<a name="line.1174"></a>
<FONT color="green">1175</FONT>         * MIME type for suggestions data.  You'll use this in your suggestions content provider<a name="line.1175"></a>
<FONT color="green">1176</FONT>         * in the getType() function.<a name="line.1176"></a>
<FONT color="green">1177</FONT>         */<a name="line.1177"></a>
<FONT color="green">1178</FONT>        public final static String SUGGEST_MIME_TYPE = <a name="line.1178"></a>
<FONT color="green">1179</FONT>                                      "vnd.android.cursor.dir/vnd.android.search.suggest";<a name="line.1179"></a>
<FONT color="green">1180</FONT>    <a name="line.1180"></a>
<FONT color="green">1181</FONT>        /**<a name="line.1181"></a>
<FONT color="green">1182</FONT>         * Column name for suggestions cursor.  &lt;i&gt;Unused - can be null or column can be omitted.&lt;/i&gt;<a name="line.1182"></a>
<FONT color="green">1183</FONT>         */<a name="line.1183"></a>
<FONT color="green">1184</FONT>        public final static String SUGGEST_COLUMN_FORMAT = "suggest_format";<a name="line.1184"></a>
<FONT color="green">1185</FONT>        /**<a name="line.1185"></a>
<FONT color="green">1186</FONT>         * Column name for suggestions cursor.  &lt;i&gt;Required.&lt;/i&gt;  This is the primary line of text that <a name="line.1186"></a>
<FONT color="green">1187</FONT>         * will be presented to the user as the suggestion.<a name="line.1187"></a>
<FONT color="green">1188</FONT>         */<a name="line.1188"></a>
<FONT color="green">1189</FONT>        public final static String SUGGEST_COLUMN_TEXT_1 = "suggest_text_1";<a name="line.1189"></a>
<FONT color="green">1190</FONT>        /**<a name="line.1190"></a>
<FONT color="green">1191</FONT>         * Column name for suggestions cursor.  &lt;i&gt;Optional.&lt;/i&gt;  If your cursor includes this column,<a name="line.1191"></a>
<FONT color="green">1192</FONT>         *  then all suggestions will be provided in a two-line format.  The second line of text is in<a name="line.1192"></a>
<FONT color="green">1193</FONT>         *  a much smaller appearance.<a name="line.1193"></a>
<FONT color="green">1194</FONT>         */<a name="line.1194"></a>
<FONT color="green">1195</FONT>        public final static String SUGGEST_COLUMN_TEXT_2 = "suggest_text_2";<a name="line.1195"></a>
<FONT color="green">1196</FONT>        /**<a name="line.1196"></a>
<FONT color="green">1197</FONT>         * Column name for suggestions cursor.  &lt;i&gt;Optional.&lt;/i&gt;  If your cursor includes this column,<a name="line.1197"></a>
<FONT color="green">1198</FONT>         *  then all suggestions will be provided in format that includes space for two small icons,<a name="line.1198"></a>
<FONT color="green">1199</FONT>         *  one at the left and one at the right of each suggestion.  The data in the column must<a name="line.1199"></a>
<FONT color="green">1200</FONT>         *  be a a resource ID for the icon you wish to have displayed.  If you include this column,<a name="line.1200"></a>
<FONT color="green">1201</FONT>         *  you must also include {@link #SUGGEST_COLUMN_ICON_2}.<a name="line.1201"></a>
<FONT color="green">1202</FONT>         */<a name="line.1202"></a>
<FONT color="green">1203</FONT>        public final static String SUGGEST_COLUMN_ICON_1 = "suggest_icon_1";<a name="line.1203"></a>
<FONT color="green">1204</FONT>        /**<a name="line.1204"></a>
<FONT color="green">1205</FONT>         * Column name for suggestions cursor.  &lt;i&gt;Optional.&lt;/i&gt;  If your cursor includes this column,<a name="line.1205"></a>
<FONT color="green">1206</FONT>         *  then all suggestions will be provided in format that includes space for two small icons,<a name="line.1206"></a>
<FONT color="green">1207</FONT>         *  one at the left and one at the right of each suggestion.  The data in the column must<a name="line.1207"></a>
<FONT color="green">1208</FONT>         *  be a a resource ID for the icon you wish to have displayed.  If you include this column,<a name="line.1208"></a>
<FONT color="green">1209</FONT>         *  you must also include {@link #SUGGEST_COLUMN_ICON_1}.<a name="line.1209"></a>
<FONT color="green">1210</FONT>         */<a name="line.1210"></a>
<FONT color="green">1211</FONT>        public final static String SUGGEST_COLUMN_ICON_2 = "suggest_icon_2";<a name="line.1211"></a>
<FONT color="green">1212</FONT>        /**<a name="line.1212"></a>
<FONT color="green">1213</FONT>         * Column name for suggestions cursor.  &lt;i&gt;Optional.&lt;/i&gt;  If this column exists &lt;i&gt;and&lt;/i&gt;<a name="line.1213"></a>
<FONT color="green">1214</FONT>         * this element exists at the given row, this is the action that will be used when<a name="line.1214"></a>
<FONT color="green">1215</FONT>         * forming the suggestion's intent.  If the element is not provided, the action will be taken<a name="line.1215"></a>
<FONT color="green">1216</FONT>         * from the android:searchSuggestIntentAction field in your XML metadata.  &lt;i&gt;At least one of<a name="line.1216"></a>
<FONT color="green">1217</FONT>         * these must be present for the suggestion to generate an intent.&lt;/i&gt;  Note:  If your action is<a name="line.1217"></a>
<FONT color="green">1218</FONT>         * the same for all suggestions, it is more efficient to specify it using XML metadata and omit<a name="line.1218"></a>
<FONT color="green">1219</FONT>         * it from the cursor.<a name="line.1219"></a>
<FONT color="green">1220</FONT>         */<a name="line.1220"></a>
<FONT color="green">1221</FONT>        public final static String SUGGEST_COLUMN_INTENT_ACTION = "suggest_intent_action";<a name="line.1221"></a>
<FONT color="green">1222</FONT>        /**<a name="line.1222"></a>
<FONT color="green">1223</FONT>         * Column name for suggestions cursor.  &lt;i&gt;Optional.&lt;/i&gt;  If this column exists &lt;i&gt;and&lt;/i&gt;<a name="line.1223"></a>
<FONT color="green">1224</FONT>         * this element exists at the given row, this is the data that will be used when<a name="line.1224"></a>
<FONT color="green">1225</FONT>         * forming the suggestion's intent.  If the element is not provided, the data will be taken<a name="line.1225"></a>
<FONT color="green">1226</FONT>         * from the android:searchSuggestIntentData field in your XML metadata.  If neither source<a name="line.1226"></a>
<FONT color="green">1227</FONT>         * is provided, the Intent's data field will be null.  Note:  If your data is<a name="line.1227"></a>
<FONT color="green">1228</FONT>         * the same for all suggestions, or can be described using a constant part and a specific ID,<a name="line.1228"></a>
<FONT color="green">1229</FONT>         * it is more efficient to specify it using XML metadata and omit it from the cursor.<a name="line.1229"></a>
<FONT color="green">1230</FONT>         */<a name="line.1230"></a>
<FONT color="green">1231</FONT>        public final static String SUGGEST_COLUMN_INTENT_DATA = "suggest_intent_data";<a name="line.1231"></a>
<FONT color="green">1232</FONT>        /**<a name="line.1232"></a>
<FONT color="green">1233</FONT>         * Column name for suggestions cursor.  &lt;i&gt;Optional.&lt;/i&gt;  If this column exists &lt;i&gt;and&lt;/i&gt;<a name="line.1233"></a>
<FONT color="green">1234</FONT>         * this element exists at the given row, then "/" and this value will be appended to the data<a name="line.1234"></a>
<FONT color="green">1235</FONT>         * field in the Intent.  This should only be used if the data field has already been set to an<a name="line.1235"></a>
<FONT color="green">1236</FONT>         * appropriate base string.<a name="line.1236"></a>
<FONT color="green">1237</FONT>         */<a name="line.1237"></a>
<FONT color="green">1238</FONT>        public final static String SUGGEST_COLUMN_INTENT_DATA_ID = "suggest_intent_data_id";<a name="line.1238"></a>
<FONT color="green">1239</FONT>        /**<a name="line.1239"></a>
<FONT color="green">1240</FONT>         * Column name for suggestions cursor.  &lt;i&gt;Required if action is <a name="line.1240"></a>
<FONT color="green">1241</FONT>         * {@link android.content.Intent#ACTION_SEARCH ACTION_SEARCH}, optional otherwise.&lt;/i&gt;  If this <a name="line.1241"></a>
<FONT color="green">1242</FONT>         * column exists &lt;i&gt;and&lt;/i&gt; this element exists at the given row, this is the data that will be<a name="line.1242"></a>
<FONT color="green">1243</FONT>         * used when forming the suggestion's query.<a name="line.1243"></a>
<FONT color="green">1244</FONT>         */<a name="line.1244"></a>
<FONT color="green">1245</FONT>        public final static String SUGGEST_COLUMN_QUERY = "suggest_intent_query";<a name="line.1245"></a>
<FONT color="green">1246</FONT>    <a name="line.1246"></a>
<FONT color="green">1247</FONT>    <a name="line.1247"></a>
<FONT color="green">1248</FONT>        private final Context mContext;<a name="line.1248"></a>
<FONT color="green">1249</FONT>        private final Handler mHandler;<a name="line.1249"></a>
<FONT color="green">1250</FONT>        <a name="line.1250"></a>
<FONT color="green">1251</FONT>        private SearchDialog mSearchDialog;<a name="line.1251"></a>
<FONT color="green">1252</FONT>        <a name="line.1252"></a>
<FONT color="green">1253</FONT>        private OnDismissListener mDismissListener = null;<a name="line.1253"></a>
<FONT color="green">1254</FONT>        private OnCancelListener mCancelListener = null;<a name="line.1254"></a>
<FONT color="green">1255</FONT>    <a name="line.1255"></a>
<FONT color="green">1256</FONT>        /*package*/ SearchManager(Context context, Handler handler)  {<a name="line.1256"></a>
<FONT color="green">1257</FONT>            mContext = context;<a name="line.1257"></a>
<FONT color="green">1258</FONT>            mHandler = handler;<a name="line.1258"></a>
<FONT color="green">1259</FONT>        }<a name="line.1259"></a>
<FONT color="green">1260</FONT>        private static ISearchManager mService;<a name="line.1260"></a>
<FONT color="green">1261</FONT>    <a name="line.1261"></a>
<FONT color="green">1262</FONT>        static {<a name="line.1262"></a>
<FONT color="green">1263</FONT>            mService = ISearchManager.Stub.asInterface(<a name="line.1263"></a>
<FONT color="green">1264</FONT>                        ServiceManager.getService(Context.SEARCH_SERVICE));<a name="line.1264"></a>
<FONT color="green">1265</FONT>        }<a name="line.1265"></a>
<FONT color="green">1266</FONT>        <a name="line.1266"></a>
<FONT color="green">1267</FONT>        /**<a name="line.1267"></a>
<FONT color="green">1268</FONT>         * Launch search UI.<a name="line.1268"></a>
<FONT color="green">1269</FONT>         *<a name="line.1269"></a>
<FONT color="green">1270</FONT>         * &lt;p&gt;The search manager will open a search widget in an overlapping<a name="line.1270"></a>
<FONT color="green">1271</FONT>         * window, and the underlying activity may be obscured.  The search <a name="line.1271"></a>
<FONT color="green">1272</FONT>         * entry state will remain in effect until one of the following events:<a name="line.1272"></a>
<FONT color="green">1273</FONT>         * &lt;ul&gt;<a name="line.1273"></a>
<FONT color="green">1274</FONT>         * &lt;li&gt;The user completes the search.  In most cases this will launch <a name="line.1274"></a>
<FONT color="green">1275</FONT>         * a search intent.&lt;/li&gt;<a name="line.1275"></a>
<FONT color="green">1276</FONT>         * &lt;li&gt;The user uses the back, home, or other keys to exit the search.&lt;/li&gt;<a name="line.1276"></a>
<FONT color="green">1277</FONT>         * &lt;li&gt;The application calls the {@link #stopSearch}<a name="line.1277"></a>
<FONT color="green">1278</FONT>         * method, which will hide the search window and return focus to the<a name="line.1278"></a>
<FONT color="green">1279</FONT>         * activity from which it was launched.&lt;/li&gt;<a name="line.1279"></a>
<FONT color="green">1280</FONT>         *<a name="line.1280"></a>
<FONT color="green">1281</FONT>         * &lt;p&gt;Most applications will &lt;i&gt;not&lt;/i&gt; use this interface to invoke search.<a name="line.1281"></a>
<FONT color="green">1282</FONT>         * The primary method for invoking search is to call <a name="line.1282"></a>
<FONT color="green">1283</FONT>         * {@link android.app.Activity#onSearchRequested Activity.onSearchRequested()} or <a name="line.1283"></a>
<FONT color="green">1284</FONT>         * {@link android.app.Activity#startSearch Activity.startSearch()}.<a name="line.1284"></a>
<FONT color="green">1285</FONT>         *<a name="line.1285"></a>
<FONT color="green">1286</FONT>         * @param initialQuery A search string can be pre-entered here, but this<a name="line.1286"></a>
<FONT color="green">1287</FONT>         * is typically null or empty.<a name="line.1287"></a>
<FONT color="green">1288</FONT>         * @param selectInitialQuery If true, the intial query will be preselected, which means that<a name="line.1288"></a>
<FONT color="green">1289</FONT>         * any further typing will replace it.  This is useful for cases where an entire pre-formed<a name="line.1289"></a>
<FONT color="green">1290</FONT>         * query is being inserted.  If false, the selection point will be placed at the end of the<a name="line.1290"></a>
<FONT color="green">1291</FONT>         * inserted query.  This is useful when the inserted query is text that the user entered,<a name="line.1291"></a>
<FONT color="green">1292</FONT>         * and the user would expect to be able to keep typing.  &lt;i&gt;This parameter is only meaningful<a name="line.1292"></a>
<FONT color="green">1293</FONT>         * if initialQuery is a non-empty string.&lt;/i&gt;<a name="line.1293"></a>
<FONT color="green">1294</FONT>         * @param launchActivity The ComponentName of the activity that has launched this search.<a name="line.1294"></a>
<FONT color="green">1295</FONT>         * @param appSearchData An application can insert application-specific <a name="line.1295"></a>
<FONT color="green">1296</FONT>         * context here, in order to improve quality or specificity of its own <a name="line.1296"></a>
<FONT color="green">1297</FONT>         * searches.  This data will be returned with SEARCH intent(s).  Null if<a name="line.1297"></a>
<FONT color="green">1298</FONT>         * no extra data is required.<a name="line.1298"></a>
<FONT color="green">1299</FONT>         * @param globalSearch If false, this will only launch the search that has been specifically<a name="line.1299"></a>
<FONT color="green">1300</FONT>         * defined by the application (which is usually defined as a local search).  If no default <a name="line.1300"></a>
<FONT color="green">1301</FONT>         * search is defined in the current application or activity, no search will be launched.<a name="line.1301"></a>
<FONT color="green">1302</FONT>         * If true, this will always launch a platform-global (e.g. web-based) search instead.<a name="line.1302"></a>
<FONT color="green">1303</FONT>         * <a name="line.1303"></a>
<FONT color="green">1304</FONT>         * @see android.app.Activity#onSearchRequested<a name="line.1304"></a>
<FONT color="green">1305</FONT>         * @see #stopSearch<a name="line.1305"></a>
<FONT color="green">1306</FONT>         */<a name="line.1306"></a>
<FONT color="green">1307</FONT>        public void startSearch(String initialQuery, <a name="line.1307"></a>
<FONT color="green">1308</FONT>                                boolean selectInitialQuery,<a name="line.1308"></a>
<FONT color="green">1309</FONT>                                ComponentName launchActivity,<a name="line.1309"></a>
<FONT color="green">1310</FONT>                                Bundle appSearchData,<a name="line.1310"></a>
<FONT color="green">1311</FONT>                                boolean globalSearch) {<a name="line.1311"></a>
<FONT color="green">1312</FONT>            <a name="line.1312"></a>
<FONT color="green">1313</FONT>            if (mSearchDialog == null) {<a name="line.1313"></a>
<FONT color="green">1314</FONT>                mSearchDialog = new SearchDialog(mContext);<a name="line.1314"></a>
<FONT color="green">1315</FONT>            }<a name="line.1315"></a>
<FONT color="green">1316</FONT>    <a name="line.1316"></a>
<FONT color="green">1317</FONT>            // activate the search manager and start it up!<a name="line.1317"></a>
<FONT color="green">1318</FONT>            mSearchDialog.show(initialQuery, selectInitialQuery, launchActivity, appSearchData, <a name="line.1318"></a>
<FONT color="green">1319</FONT>                    globalSearch);<a name="line.1319"></a>
<FONT color="green">1320</FONT>            <a name="line.1320"></a>
<FONT color="green">1321</FONT>            mSearchDialog.setOnCancelListener(this);<a name="line.1321"></a>
<FONT color="green">1322</FONT>            mSearchDialog.setOnDismissListener(this);<a name="line.1322"></a>
<FONT color="green">1323</FONT>        }<a name="line.1323"></a>
<FONT color="green">1324</FONT>    <a name="line.1324"></a>
<FONT color="green">1325</FONT>        /**<a name="line.1325"></a>
<FONT color="green">1326</FONT>         * Terminate search UI.<a name="line.1326"></a>
<FONT color="green">1327</FONT>         *<a name="line.1327"></a>
<FONT color="green">1328</FONT>         * &lt;p&gt;Typically the user will terminate the search UI by launching a<a name="line.1328"></a>
<FONT color="green">1329</FONT>         * search or by canceling.  This function allows the underlying application<a name="line.1329"></a>
<FONT color="green">1330</FONT>         * or activity to cancel the search prematurely (for any reason).<a name="line.1330"></a>
<FONT color="green">1331</FONT>         * <a name="line.1331"></a>
<FONT color="green">1332</FONT>         * &lt;p&gt;This function can be safely called at any time (even if no search is active.)<a name="line.1332"></a>
<FONT color="green">1333</FONT>         *<a name="line.1333"></a>
<FONT color="green">1334</FONT>         * @see #startSearch<a name="line.1334"></a>
<FONT color="green">1335</FONT>         */<a name="line.1335"></a>
<FONT color="green">1336</FONT>        public void stopSearch()  {<a name="line.1336"></a>
<FONT color="green">1337</FONT>            if (mSearchDialog != null) {<a name="line.1337"></a>
<FONT color="green">1338</FONT>                mSearchDialog.cancel();<a name="line.1338"></a>
<FONT color="green">1339</FONT>            }<a name="line.1339"></a>
<FONT color="green">1340</FONT>        }<a name="line.1340"></a>
<FONT color="green">1341</FONT>    <a name="line.1341"></a>
<FONT color="green">1342</FONT>        /**<a name="line.1342"></a>
<FONT color="green">1343</FONT>         * Determine if the Search UI is currently displayed.  <a name="line.1343"></a>
<FONT color="green">1344</FONT>         * <a name="line.1344"></a>
<FONT color="green">1345</FONT>         * This is provided primarily for application test purposes.<a name="line.1345"></a>
<FONT color="green">1346</FONT>         *<a name="line.1346"></a>
<FONT color="green">1347</FONT>         * @return Returns true if the search UI is currently displayed.<a name="line.1347"></a>
<FONT color="green">1348</FONT>         * <a name="line.1348"></a>
<FONT color="green">1349</FONT>         * @hide<a name="line.1349"></a>
<FONT color="green">1350</FONT>         */<a name="line.1350"></a>
<FONT color="green">1351</FONT>        public boolean isVisible()  {<a name="line.1351"></a>
<FONT color="green">1352</FONT>            if (mSearchDialog != null) {<a name="line.1352"></a>
<FONT color="green">1353</FONT>                return mSearchDialog.isShowing();<a name="line.1353"></a>
<FONT color="green">1354</FONT>            }<a name="line.1354"></a>
<FONT color="green">1355</FONT>            return false;<a name="line.1355"></a>
<FONT color="green">1356</FONT>        }<a name="line.1356"></a>
<FONT color="green">1357</FONT>        <a name="line.1357"></a>
<FONT color="green">1358</FONT>        /**<a name="line.1358"></a>
<FONT color="green">1359</FONT>         * See {@link #setOnDismissListener} for configuring your activity to monitor search UI state.<a name="line.1359"></a>
<FONT color="green">1360</FONT>         */<a name="line.1360"></a>
<FONT color="green">1361</FONT>        public interface OnDismissListener {<a name="line.1361"></a>
<FONT color="green">1362</FONT>            /**<a name="line.1362"></a>
<FONT color="green">1363</FONT>             * This method will be called when the search UI is dismissed. To make use if it, you must<a name="line.1363"></a>
<FONT color="green">1364</FONT>             * implement this method in your activity, and call {@link #setOnDismissListener} to <a name="line.1364"></a>
<FONT color="green">1365</FONT>             * register it.<a name="line.1365"></a>
<FONT color="green">1366</FONT>             */<a name="line.1366"></a>
<FONT color="green">1367</FONT>            public void onDismiss();<a name="line.1367"></a>
<FONT color="green">1368</FONT>        }<a name="line.1368"></a>
<FONT color="green">1369</FONT>        <a name="line.1369"></a>
<FONT color="green">1370</FONT>        /**<a name="line.1370"></a>
<FONT color="green">1371</FONT>         * See {@link #setOnCancelListener} for configuring your activity to monitor search UI state.<a name="line.1371"></a>
<FONT color="green">1372</FONT>         */<a name="line.1372"></a>
<FONT color="green">1373</FONT>        public interface OnCancelListener {<a name="line.1373"></a>
<FONT color="green">1374</FONT>            /**<a name="line.1374"></a>
<FONT color="green">1375</FONT>             * This method will be called when the search UI is canceled. To make use if it, you must<a name="line.1375"></a>
<FONT color="green">1376</FONT>             * implement this method in your activity, and call {@link #setOnCancelListener} to <a name="line.1376"></a>
<FONT color="green">1377</FONT>             * register it.<a name="line.1377"></a>
<FONT color="green">1378</FONT>             */<a name="line.1378"></a>
<FONT color="green">1379</FONT>            public void onCancel();<a name="line.1379"></a>
<FONT color="green">1380</FONT>        }<a name="line.1380"></a>
<FONT color="green">1381</FONT>    <a name="line.1381"></a>
<FONT color="green">1382</FONT>        /**<a name="line.1382"></a>
<FONT color="green">1383</FONT>         * Set or clear the callback that will be invoked whenever the search UI is dismissed.<a name="line.1383"></a>
<FONT color="green">1384</FONT>         * <a name="line.1384"></a>
<FONT color="green">1385</FONT>         * @param listener The {@link OnDismissListener} to use, or null.<a name="line.1385"></a>
<FONT color="green">1386</FONT>         */<a name="line.1386"></a>
<FONT color="green">1387</FONT>        public void setOnDismissListener(final OnDismissListener listener) {<a name="line.1387"></a>
<FONT color="green">1388</FONT>            mDismissListener = listener;<a name="line.1388"></a>
<FONT color="green">1389</FONT>        }<a name="line.1389"></a>
<FONT color="green">1390</FONT>        <a name="line.1390"></a>
<FONT color="green">1391</FONT>        /**<a name="line.1391"></a>
<FONT color="green">1392</FONT>         * The callback from the search dialog when dismissed<a name="line.1392"></a>
<FONT color="green">1393</FONT>         * @hide<a name="line.1393"></a>
<FONT color="green">1394</FONT>         */<a name="line.1394"></a>
<FONT color="green">1395</FONT>        public void onDismiss(DialogInterface dialog) {<a name="line.1395"></a>
<FONT color="green">1396</FONT>            if (dialog == mSearchDialog) {<a name="line.1396"></a>
<FONT color="green">1397</FONT>                if (mDismissListener != null) {<a name="line.1397"></a>
<FONT color="green">1398</FONT>                    mDismissListener.onDismiss();<a name="line.1398"></a>
<FONT color="green">1399</FONT>                }<a name="line.1399"></a>
<FONT color="green">1400</FONT>            }<a name="line.1400"></a>
<FONT color="green">1401</FONT>        }<a name="line.1401"></a>
<FONT color="green">1402</FONT>    <a name="line.1402"></a>
<FONT color="green">1403</FONT>        /**<a name="line.1403"></a>
<FONT color="green">1404</FONT>         * Set or clear the callback that will be invoked whenever the search UI is canceled.<a name="line.1404"></a>
<FONT color="green">1405</FONT>         * <a name="line.1405"></a>
<FONT color="green">1406</FONT>         * @param listener The {@link OnCancelListener} to use, or null.<a name="line.1406"></a>
<FONT color="green">1407</FONT>         */<a name="line.1407"></a>
<FONT color="green">1408</FONT>        public void setOnCancelListener(final OnCancelListener listener) {<a name="line.1408"></a>
<FONT color="green">1409</FONT>            mCancelListener = listener;<a name="line.1409"></a>
<FONT color="green">1410</FONT>        }<a name="line.1410"></a>
<FONT color="green">1411</FONT>        <a name="line.1411"></a>
<FONT color="green">1412</FONT>        <a name="line.1412"></a>
<FONT color="green">1413</FONT>        /**<a name="line.1413"></a>
<FONT color="green">1414</FONT>         * The callback from the search dialog when canceled<a name="line.1414"></a>
<FONT color="green">1415</FONT>         * @hide<a name="line.1415"></a>
<FONT color="green">1416</FONT>         */<a name="line.1416"></a>
<FONT color="green">1417</FONT>        public void onCancel(DialogInterface dialog) {<a name="line.1417"></a>
<FONT color="green">1418</FONT>            if (dialog == mSearchDialog) {<a name="line.1418"></a>
<FONT color="green">1419</FONT>                if (mCancelListener != null) {<a name="line.1419"></a>
<FONT color="green">1420</FONT>                    mCancelListener.onCancel();<a name="line.1420"></a>
<FONT color="green">1421</FONT>                }<a name="line.1421"></a>
<FONT color="green">1422</FONT>            }<a name="line.1422"></a>
<FONT color="green">1423</FONT>        }<a name="line.1423"></a>
<FONT color="green">1424</FONT>    <a name="line.1424"></a>
<FONT color="green">1425</FONT>        /**<a name="line.1425"></a>
<FONT color="green">1426</FONT>         * Save instance state so we can recreate after a rotation.<a name="line.1426"></a>
<FONT color="green">1427</FONT>         * <a name="line.1427"></a>
<FONT color="green">1428</FONT>         * @hide<a name="line.1428"></a>
<FONT color="green">1429</FONT>         */<a name="line.1429"></a>
<FONT color="green">1430</FONT>        void saveSearchDialog(Bundle outState, String key) {<a name="line.1430"></a>
<FONT color="green">1431</FONT>            if (mSearchDialog != null &amp;&amp; mSearchDialog.isShowing()) {<a name="line.1431"></a>
<FONT color="green">1432</FONT>                Bundle searchDialogState = mSearchDialog.onSaveInstanceState();<a name="line.1432"></a>
<FONT color="green">1433</FONT>                outState.putBundle(key, searchDialogState);<a name="line.1433"></a>
<FONT color="green">1434</FONT>            }<a name="line.1434"></a>
<FONT color="green">1435</FONT>        }<a name="line.1435"></a>
<FONT color="green">1436</FONT>    <a name="line.1436"></a>
<FONT color="green">1437</FONT>        /**<a name="line.1437"></a>
<FONT color="green">1438</FONT>         * Restore instance state after a rotation.<a name="line.1438"></a>
<FONT color="green">1439</FONT>         * <a name="line.1439"></a>
<FONT color="green">1440</FONT>         * @hide<a name="line.1440"></a>
<FONT color="green">1441</FONT>         */<a name="line.1441"></a>
<FONT color="green">1442</FONT>        void restoreSearchDialog(Bundle inState, String key) {        <a name="line.1442"></a>
<FONT color="green">1443</FONT>            Bundle searchDialogState = inState.getBundle(key);<a name="line.1443"></a>
<FONT color="green">1444</FONT>            if (searchDialogState != null) {<a name="line.1444"></a>
<FONT color="green">1445</FONT>                if (mSearchDialog == null) {<a name="line.1445"></a>
<FONT color="green">1446</FONT>                    mSearchDialog = new SearchDialog(mContext);<a name="line.1446"></a>
<FONT color="green">1447</FONT>                }<a name="line.1447"></a>
<FONT color="green">1448</FONT>                mSearchDialog.onRestoreInstanceState(searchDialogState);<a name="line.1448"></a>
<FONT color="green">1449</FONT>            }<a name="line.1449"></a>
<FONT color="green">1450</FONT>        }<a name="line.1450"></a>
<FONT color="green">1451</FONT>        <a name="line.1451"></a>
<FONT color="green">1452</FONT>        /**<a name="line.1452"></a>
<FONT color="green">1453</FONT>         * Hook for updating layout on a rotation<a name="line.1453"></a>
<FONT color="green">1454</FONT>         * <a name="line.1454"></a>
<FONT color="green">1455</FONT>         * @hide<a name="line.1455"></a>
<FONT color="green">1456</FONT>         */<a name="line.1456"></a>
<FONT color="green">1457</FONT>        void onConfigurationChanged(Configuration newConfig) {<a name="line.1457"></a>
<FONT color="green">1458</FONT>            if (mSearchDialog != null &amp;&amp; mSearchDialog.isShowing()) {<a name="line.1458"></a>
<FONT color="green">1459</FONT>                mSearchDialog.onConfigurationChanged(newConfig);<a name="line.1459"></a>
<FONT color="green">1460</FONT>            }<a name="line.1460"></a>
<FONT color="green">1461</FONT>        }<a name="line.1461"></a>
<FONT color="green">1462</FONT>          <a name="line.1462"></a>
<FONT color="green">1463</FONT>    }<a name="line.1463"></a>




























































</PRE>
</BODY>
</HTML>
